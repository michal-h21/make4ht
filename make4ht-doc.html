<!DOCTYPE html>
<html lang='en'>
<head>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.6.0" />
<title>The make4ht build system</title>
<meta charset='utf-8' />
<meta content='TeX4ht (https://tug.org/tex4ht/)' name='generator' />
<meta content='width=device-width,initial-scale=1' name='viewport' />
<link href='make4ht-doc.css' rel='stylesheet' type='text/css' />
<meta content='make4ht-doc.tex' name='src' />
<script src='https://hypothes.is/embed.js'></script>
<meta content='The make4ht build system' property='og:title' />
<meta content='Michal Hoftich' property='og:author' />
<meta content='website' property='og:type' />
<meta content='https://www.kodymirus.cz/make4ht/make4ht-doc.html' property='og:url' />
<link href='https://www.kodymirus.cz/make4ht/make4ht-doc.html' rel='canonical' />
</head>
<body>
<!-- l. 26 -->
<p class='noindent'></p>
<!-- l. 26 -->
<p class='indent'></p>
<div class='center'><!-- l. 26 -->
<p class='noindent'></p>
<!-- l. 26 -->
<p class='noindent'><span class='ec-lmr-17'>The</span> <span class='ec-lmtt-12x-x-144'>make4ht</span> <span class='ec-lmr-17'>build system</span></p>
<div class='tabular'>
<table class='tabular' id='TBL-1'>
<colgroup id='TBL-1-1g'>
<col id='TBL-1-1' /></colgroup>
<tr id='TBL-1-1-' style='vertical-align:baseline;'>
<td class='td11' id='TBL-1-1-1' style='white-space:nowrap; text-align:center;'><span class='ec-lmr-12'>Michal Hoftich &lt;</span><a href='michal.h21@gmail.com'><span class='ec-lmr-12'>michal.h21@gmail.com</span></a><span class='ec-lmr-12'>&gt;</span></td>
</tr>
</table>
</div>
<!-- l. 26 -->
<p class='noindent'><span class='ec-lmr-12'>Version undefined</span><br />
<span class='ec-lmr-12'>undefined</span></p>
</div>
<h3 class='likesectionHead' id='contents'><a id='x1-1000'></a>Contents</h3>
<div class='tableofcontents'><span class='sectionToc'>1 <a href='#introduction' id='QQ2-1-2'>Introduction</a></span><br />
<span class='sectionToc'>2 <a href='#usage' id='QQ2-1-3'>Usage</a></span><br />
&nbsp;<span class='subsectionToc'>2.1 <a href='#command-line-options' id='QQ2-1-4'>Command line options</a></span><br />
&nbsp;<span class='subsectionToc'>2.2 <a href='#option-handling' id='QQ2-1-5'>Option handling</a></span><br />
&nbsp;<span class='subsectionToc'>2.3 <a href='#input-from-the-standard-input' id='QQ2-1-6'>Input from the standard input</a></span><br />
&nbsp;<span class='subsectionToc'>2.4 <a href='#change-amount-of-information-printed-on-the-command-line' id='QQ2-1-7'>Change amount of information printed on the command line</a></span><br />
<span class='sectionToc'>3 <a href='#difference-of-makeht-from-htlatex' id='QQ2-1-8'>Difference of <span class='ec-lmtt-10'>make4ht</span> from <span class='ec-lmtt-10'>htlatex</span></a></span><br />
&nbsp;<span class='subsectionToc'>3.1 <a href='#passing-of-command-line-arguments-to-lowlevel-commands-used-in-the-conversion' id='QQ2-1-9'>Passing of command line arguments to low-level commands used in the conversion</a></span><br />
&nbsp;<span class='subsectionToc'>3.2 <a href='#compilation-sequence' id='QQ2-1-10'>Compilation sequence</a></span><br />
&nbsp;<span class='subsectionToc'>3.3 <a href='#handling-of-the-generated-files' id='QQ2-1-11'>Handling of the generated files</a></span><br />
&nbsp;<span class='subsectionToc'>3.4 <a href='#image-conversion-and-postprocessing-of-the-generated-files' id='QQ2-1-12'>Image conversion and postprocessing of the generated files</a></span><br />
<span class='sectionToc'>4 <a href='#output-file-formats-and-extensions' id='QQ2-1-13'>Output file formats and extensions</a></span><br />
&nbsp;<span class='subsectionToc'>4.1 <a href='#extensions' id='QQ2-1-14'>Extensions</a></span><br />
<span class='sectionToc'>5 <a href='#build-files' id='QQ2-1-15'>Build files</a></span><br />
&nbsp;<span class='subsectionToc'>5.1 <a href='#user-commands' id='QQ2-1-16'>User commands</a></span><br />
&nbsp;<span class='subsectionToc'>5.2 <a href='#provided-commands' id='QQ2-1-21'>Provided commands</a></span><br />
&nbsp;<span class='subsectionToc'>5.3 <a href='#file-matches' id='QQ2-1-22'>File matches</a></span><br />
&nbsp;<span class='subsectionToc'>5.4 <a href='#image-conversion' id='QQ2-1-25'>Image conversion</a></span><br />
&nbsp;<span class='subsectionToc'>5.5 <a href='#the-mode-variable' id='QQ2-1-26'>The <span class='ec-lmtt-10'>mode</span> variable</a></span><br />
&nbsp;<span class='subsectionToc'>5.6 <a href='#the-settings-table' id='QQ2-1-27'>The <span class='ec-lmtt-10'>settings</span> table</a></span><br />
<span class='sectionToc'>6 <a href='#-makeht-configuration-file' id='QQ2-1-29'><span class='ec-lmtt-10'>make4ht</span> configuration file</a></span><br />
&nbsp;<span class='subsectionToc'>6.1 <a href='#location' id='QQ2-1-30'>Location</a></span><br />
&nbsp;<span class='subsectionToc'>6.2 <a href='#additional-commands' id='QQ2-1-31'>Additional commands</a></span><br />
&nbsp;<span class='subsectionToc'>6.3 <a href='#example' id='QQ2-1-32'>Example</a></span><br />
<span class='sectionToc'>7 <a href='#list-of-available-settings-for-filters-and-extensions' id='QQ2-1-33'>List of available settings for filters and extensions.</a></span><br />
&nbsp;<span class='subsectionToc'>7.1 <a href='#indexing-commands' id='QQ2-1-34'>Indexing commands</a></span><br />
&nbsp;<span class='subsectionToc'>7.2 <a href='#the-tidy-extension' id='QQ2-1-38'>The <span class='ec-lmtt-10'>tidy</span> extension</a></span><br />
&nbsp;<span class='subsectionToc'>7.3 <a href='#the-collapsetoc-dom-filter' id='QQ2-1-39'>The <span class='ec-lmtt-10'>collapsetoc</span> dom filter</a></span><br />
&nbsp;<span class='subsectionToc'>7.4 <a href='#the-fixinlines-dom-filter' id='QQ2-1-40'>The <span class='ec-lmtt-10'>fixinlines</span> dom filter</a></span><br />
&nbsp;<span class='subsectionToc'>7.5 <a href='#the-joincharacters-dom-filter' id='QQ2-1-41'>The <span class='ec-lmtt-10'>joincharacters</span> dom filter</a></span><br />
&nbsp;<span class='subsectionToc'>7.6 <a href='#the-mjcli-filter-and-extension' id='QQ2-1-42'>The <span class='ec-lmtt-10'>mjcli</span> filter and extension</a></span><br />
&nbsp;<span class='subsectionToc'>7.7 <a href='#the-staticsite-filter-and-extension' id='QQ2-1-44'>The <span class='ec-lmtt-10'>staticsite</span> filter and extension</a></span><br />
&nbsp;<span class='subsectionToc'>7.8 <a href='#the-dvisvgmhashes-extension' id='QQ2-1-45'>The <span class='ec-lmtt-10'>dvisvgm_hashes</span> extension</a></span><br />
&nbsp;<span class='subsectionToc'>7.9 <a href='#the-odttemplate-filter-and-extension' id='QQ2-1-46'>The <span class='ec-lmtt-10'>odttemplate</span> filter and extension</a></span><br />
&nbsp;<span class='subsectionToc'>7.10 <a href='#the-aeneas-filter' id='QQ2-1-47'>The <span class='ec-lmtt-10'>aeneas</span> filter</a></span><br />
&nbsp;<span class='subsectionToc'>7.11 <a href='#the-makehtaeneasconfig-package' id='QQ2-1-48'>The <span class='ec-lmtt-10'>make4ht-aeneas-config</span> package</a></span><br />
<span class='sectionToc'>8 <a href='#troubleshooting' id='QQ2-1-53'>Troubleshooting</a></span><br />
&nbsp;<span class='subsectionToc'>8.1 <a href='#incorrect-handling-of-command-line-arguments-for-texht-tht-or-latex' id='QQ2-1-54'>Incorrect handling of command line arguments for <span class='ec-lmtt-10'>tex4ht</span>, <span class='ec-lmtt-10'>t4ht</span> or <span class='ec-lmtt-10'>latex</span></a></span><br />
&nbsp;<span class='subsectionToc'>8.2 <a href='#table-of-contents-points-to-a-wrong-destination' id='QQ2-1-55'>Table of Contents points to a wrong destination</a></span><br />
&nbsp;<span class='subsectionToc'>8.3 <a href='#filenames-containing-spaces' id='QQ2-1-56'>Filenames containing spaces</a></span><br />
&nbsp;<span class='subsectionToc'>8.4 <a href='#filenames-containing-nonascii-characters' id='QQ2-1-57'>Filenames containing non-ASCII characters</a></span><br />
<span class='sectionToc'>9 <a href='#license' id='QQ2-1-58'>License</a></span><br />
<span class='sectionToc'>10 <a href='#changelog' id='QQ2-1-59'>Changelog</a></span></div>
<p><a id='introduction'></a></p>
<h3 class='sectionHead'><span class='titlemark'>1</span> <a id='x1-20001'></a>Introduction</h3>
<!-- l. 4 -->
<p class='noindent'><span class='ec-lmtt-10'>make4ht</span> is a build system for <a href='https://tug.org/tex4ht/'>TeX4ht</a>, TeX&nbsp;to XML converter. It provides a command line tool that drives the conversion process. It also provides a library that can be used to create customized conversion tools. An example of such a tool is <a href='https://github.com/michal-h21/tex4ebook'>tex4ebook</a>, a tool for conversion from TeX&nbsp;to ePub and other e-book formats.</p>
<!-- l. 12 -->
<p class='indent'>See section <a href='#difference-of-makeht-from-htlatex'>3<!-- tex4ht:ref: sec:htlatex  --></a> for some reasons why you should consider to use <span class='ec-lmtt-10'>make4ht</span> instead of <span class='ec-lmtt-10'>htlatex</span>,<br class='newline' />
section <a href='#output-file-formats-and-extensions'>4<!-- tex4ht:ref: sec:output  --></a> talks about supported output formats and extensions and section <a href='#build-files'>5<!-- tex4ht:ref: sec:buildfiles  --></a> describes build files, which can be used to execute additional commands or post-process the generated files.</p>
<!-- l. 20 -->
<p class='indent'><a id='usage'></a></p>
<h3 class='sectionHead'><span class='titlemark'>2</span> <a id='x1-30002'></a>Usage</h3>
<!-- l. 22 -->
<p class='noindent'>The basic conversion from LaTeX&nbsp;to <span class='ec-lmtt-10'>HTML</span> using <span class='ec-lmtt-10'>make4ht</span> can be executed using the following command:</p>
<pre class='verbatim' id='verbatim-1'>
$ make4ht filename.tex
</pre>
<!-- l. 27 -->
<p class='nopar'></p>
<!-- l. 29 -->
<p class='indent'>It will produce a file named <span class='ec-lmtt-10'>filename.html</span> if the compilation goes without fatal errors.</p>
<!-- l. 33 -->
<p class='indent'><a id='clioptions'></a></p>
<h4 class='subsectionHead' id='command-line-options'><span class='titlemark'>2.1</span> <a id='x1-40002.1'></a>Command line options</h4>
<pre class='verbatim' id='verbatim-2'>
make4ht - build system for TeX4ht
Usage:
make4ht [options] filename ["tex4ht.sty op." "tex4ht op."
     "t4ht op" "latex op"]
-a,--loglevel (default status) Set log level.
            possible values: debug, info, status, warning, error, fatal
-b,--backend (default tex4ht) Backend used for xml generation.
     possible values: tex4ht or lua4ht
-c,--config (default xhtml) Custom config file
-d,--output-dir (default "")  Output directory
-e,--build-file (default nil)  If the build filename is different
     than ‘filename‘.mk4
-f,--format  (default nil)  Output file format
-j,--jobname (default nil)  Set the jobname
-l,--lua  Use lualatex for document compilation
-m,--mode (default default) Switch which can be used in the makefile
-n,--no-tex4ht  Disable DVI file processing with tex4ht command
-s,--shell-escape Enables running external programs from LaTeX
-u,--utf8  For output documents in utf8 encoding
-x,--xetex Use xelatex for document compilation
-v,--version  Print version number
&lt;filename&gt; (string) Input filename
</pre>
<!-- l. 60 -->
<p class='nopar'></p>
<!-- l. 63 -->
<p class='indent'><a id='option-handling'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>2.2</span> <a id='x1-50002.2'></a>Option handling</h4>
<!-- l. 65 -->
<p class='noindent'>It is possible to invoke <span class='ec-lmtt-10'>make4ht</span> in the same way as <span class='ec-lmtt-10'>htlatex</span>:</p>
<pre class='verbatim' id='verbatim-3'>
$ make4ht filename "customcfg, charset=utf-8" "-cunihtf -utf8" "-dfoo"
</pre>
<!-- l. 70 -->
<p class='nopar'></p>
<!-- l. 72 -->
<p class='indent'>Note that this will not use <span class='ec-lmtt-10'>make4ht</span> routines for the output directory handling. See section <a href='#handling-of-the-generated-files'>3.3<!-- tex4ht:ref: sec:output-dir  --></a> for more information about this issue. To use these routines, change the previous listing to:</p>
<pre class='verbatim' id='verbatim-4'>
$ make4ht -d foo filename "customcfg, charset=utf-8" "-cunihtf -utf8"
</pre>
<!-- l. 79 -->
<p class='nopar'></p>
<!-- l. 81 -->
<p class='indent'>This call has the same effect as the following:</p>
<pre class='verbatim' id='verbatim-5'>
$ make4ht -u -c customcfg -d foo filename
</pre>
<!-- l. 85 -->
<p class='nopar'></p>
<!-- l. 87 -->
<p class='indent'>Output directory does not have to exist, it <span class='ec-lmtt-10'>make4ht</span> creates it automatically. Specified path can be relative to the current directory, or absolute:</p>
<pre class='verbatim' id='verbatim-6'>
$ make4ht -d use/current/dir/ filename
$ make4ht -d ../gotoparrentdir filename
$ make4ht -d ~/gotohomedir filename
$ make4ht -d c:\documents\windowspathsareworkingtoo filename
</pre>
<!-- l. 96 -->
<p class='nopar'></p>
<!-- l. 98 -->
<p class='indent'>The short options that do not take parameters can be collapsed:</p>
<pre class='verbatim' id='verbatim-7'>
$ make4ht -ulc customcfg -d foo filename
</pre>
<!-- l. 102 -->
<p class='nopar'></p>
<!-- l. 106 -->
<p class='indent'><a id='input-from-the-standard-input'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>2.3</span> <a id='x1-60002.3'></a>Input from the standard input</h4>
<!-- l. 108 -->
<p class='noindent'>To pass the output from other commands to <span class='ec-lmtt-10'>make4ht</span>, use the <span class='ec-lmtt-10'>-</span> character as a filename. It is best to use this feature together with the <span class='ec-lmtt-10'>--jobname</span> or <span class='ec-lmtt-10'>-j</span> option.</p>
<pre class='verbatim' id='verbatim-8'>
$ cat hello.tex | make4ht -j world -
</pre>
<!-- l. 114 -->
<p class='nopar'></p>
<!-- l. 118 -->
<p class='indent'><a id='change-amount-of-information-printed-on-the-command-line'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>2.4</span> <a id='x1-70002.4'></a>Change amount of information printed on the command line</h4>
<!-- l. 120 -->
<p class='noindent'>By default, <span class='ec-lmtt-10'>make4ht</span> tries to be quiet, so it hides most of the command line messages and output from the executed commands. It displays status messages, warnings, and errors. The logging level can be selected using the <span class='ec-lmtt-10'>--loglevel</span> or <span class='ec-lmtt-10'>-a</span> options. If the compilation fails, it may be useful to display more information using the <span class='ec-lmtt-10'>info</span> or <span class=
'ec-lmtt-10'>debug</span> levels.</p>
<pre class='verbatim' id='verbatim-9'>
$ make4ht -a debug faulty.tex
</pre>
<!-- l. 129 -->
<p class='nopar'></p>
<!-- l. 133 -->
<p class='indent'><a id='difference-of-make4ht-from-htlatex'></a></p>
<h3 class='sectionHead' id='difference-of-makeht-from-htlatex'><span class='titlemark'>3</span> <a id='x1-80003'></a>Difference of <span class='ec-lmtt-10'>make4ht</span> from <span class='ec-lmtt-10'>htlatex</span></h3>
<!-- l. 137 -->
<p class='noindent'>TeX4ht&nbsp;system supports several output formats, most notably <span class='ec-lmtt-10'>XHTML</span>, <span class='ec-lmtt-10'>HTML&nbsp;5</span> and <span class='ec-lmtt-10'>ODT</span>, but it also supports <span class='ec-lmtt-10'>TEI</span> or <span class='ec-lmtt-10'>Docbook</span>.</p>
<!-- l. 141 -->
<p class='indent'>The conversion can be invoked using several scripts, which are distributed with TeX4ht. They differ in parameters passed to the underlying commands.</p>
<!-- l. 145 -->
<p class='indent'>These scripts invoke LaTeX&nbsp;or Plain TeX&nbsp;with special instructions to load the <span class='ec-lmtt-10'>tex4ht.sty</span> package. The TeX&nbsp;run produces a special <span class='ec-lmtt-10'>DVI</span> file that contains the code for the desired output format. The produced <span class='ec-lmtt-10'>DVI</span> file is then processed using the <span class='ec-lmtt-10'>tex4ht</span> command, which in conjunction with the <span class='ec-lmtt-10'>t4ht</span> command produces the
desired output files.</p>
<!-- l. 155 -->
<p class='indent'><a id='passing-of-command-line-arguments-to-low-level-commands-used-in-the-conversion'></a></p>
<h4 class='subsectionHead' id='passing-of-command-line-arguments-to-lowlevel-commands-used-in-the-conversion'><span class='titlemark'>3.1</span> <a id='x1-90003.1'></a>Passing of command line arguments to low-level commands used in the conversion</h4>
<!-- l. 157 -->
<p class='noindent'>The basic conversion script provided by TeX4ht&nbsp;system is named <span class='ec-lmtt-10'>htlatex</span>. It compiles LaTeX&nbsp; files to <span class='ec-lmtt-10'>HTML</span> with this command sequence:</p>
<pre class='verbatim' id='verbatim-10'>
$ latex $latex_options ’code for loading tex4ht.sty \input{filename}’
$ latex $latex_options ’code for loading tex4ht.sty \input{filename}’
$ latex $latex_options ’code for loading tex4ht.sty \input{filename}’
$ tex4ht $tex4ht_options filename
$ t4ht $t4ht_options filename
</pre>
<!-- l. 167 -->
<p class='nopar'></p>
<!-- l. 169 -->
<p class='indent'>The options for various parts of the system can be passed on the command line:</p>
<pre class='verbatim' id='verbatim-11'>
$ htlatex filename "tex4ht.sty options" "tex4ht_options" "t4ht_options" "latex_options"
</pre>
<!-- l. 174 -->
<p class='nopar'></p>
<!-- l. 176 -->
<p class='indent'>For basic <span class='ec-lmtt-10'>HTML</span> conversion it is possible to use the most basic invocation:</p>
<pre class='verbatim' id='verbatim-12'>
$ htlatex filename.tex
</pre>
<!-- l. 181 -->
<p class='nopar'></p>
<!-- l. 183 -->
<p class='indent'>It can be much more involved for the <span class='ec-lmtt-10'>HTML&nbsp;5</span> output in <span class='ec-lmtt-10'>UTF-8</span> encoding:</p>
<pre class='verbatim' id='verbatim-13'>
$ htlatex filename.tex "xhtml,html5,charset=utf-8" " -cmozhtf -utf8"
</pre>
<!-- l. 188 -->
<p class='nopar'></p>
<!-- l. 190 -->
<p class='indent'><span class='ec-lmtt-10'>make4ht</span> can simplify it:</p>
<pre class='verbatim' id='verbatim-14'>
$ make4ht -u filename.tex
</pre>
<!-- l. 194 -->
<p class='nopar'></p>
<!-- l. 196 -->
<p class='indent'>The <span class='ec-lmtt-10'>-u</span> option requires the <span class='ec-lmtt-10'>UTF-8</span> encoding. <span class='ec-lmtt-10'>HTML&nbsp;5</span> is used as the default output format by <span class='ec-lmtt-10'>make4ht</span>.</p>
<!-- l. 200 -->
<p class='indent'>More information about the command line arguments can be found in section <a href='#command-line-options'>2.1<!-- tex4ht:ref: sec:clioptions  --></a>.</p>
<!-- l. 204 -->
<p class='indent'><a id='compilation-sequence'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>3.2</span> <a id='x1-100003.2'></a>Compilation sequence</h4>
<!-- l. 206 -->
<p class='noindent'><span class='ec-lmtt-10'>htlatex</span> has a fixed compilation order and a hard-coded number of LaTeX&nbsp;invocations.</p>
<!-- l. 209 -->
<p class='indent'>It is not possible to execute additional commands during the compilation. When we want to run a program that interacts with LaTeX, such as <span class='ec-lmtt-10'>Makeindex</span> or <span class='ec-lmtt-10'>Bibtex</span>, we have two options. The first option is to create a new script based on <span class='ec-lmtt-10'>htlatex</span> and add the wanted commands to the modified script. The second option is to execute <span class='ec-lmtt-10'>htlatex</span>, then the additional and then
<span class='ec-lmtt-10'>htlatex</span> again. The second option means that LaTeX&nbsp;will be invoked six times, as each call to <span class='ec-lmtt-10'>htlatex</span> executes three calls to LaTeX. This can lead to significantly long compilation times.</p>
<!-- l. 219 -->
<p class='indent'><span class='ec-lmtt-10'>make4ht</span> provides a solution for this issue using a build file, or extensions. These can be used for interaction with external tools.</p>
<!-- l. 222 -->
<p class='indent'><span class='ec-lmtt-10'>make4ht</span> also provides compilation modes, which enables to select commands that should be executed using a command line option.</p>
<!-- l. 225 -->
<p class='indent'>There is a built-in <span class='ec-lmtt-10'>draft</span> mode, which invokes LaTeX&nbsp;only once, instead of the default three invocations. It is useful for the compilations of the document before its final stage, when it is not important that all cross-references work. It can save quite a lot of the compilation time:</p>
<pre class='verbatim' id='verbatim-15'>
$ make4ht -um draft filename.tex
</pre>
<!-- l. 233 -->
<p class='nopar'></p>
<!-- l. 235 -->
<p class='indent'>Another buil-in mode is <span class='ec-lmtt-10'>clean</span>. It executes the <span class='ec-lmtt-10'>Make:clean()</span> command to remove all generated and temporary files from the current directory. No LaTeX&nbsp;compilation happens in this mode.</p>
<!-- l. 240 -->
<p class='indent'>It should be used in this way:</p>
<pre class='verbatim' id='verbatim-16'>
# copy generated files to a direcory
$ make4ht -d outdir filename.tex
# remove all generated files in the current dir
# the -a info option will print files that are removed
$ make4ht -m clean -a info filename.tex
</pre>
<!-- l. 248 -->
<p class='nopar'></p>
<!-- l. 250 -->
<p class='indent'>More information about the build files can be found in section <a href='#build-files'>5<!-- tex4ht:ref: sec:buildfiles  --></a>.</p>
<!-- l. 255 -->
<p class='indent'><a id='handling-of-the-generated-files'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>3.3</span> <a id='x1-110003.3'></a>Handling of the generated files</h4>
<!-- l. 259 -->
<p class='noindent'>There are also issues with the behavior of the <span class='ec-lmtt-10'>t4ht</span> application. It reads the <span class='ec-lmtt-10'>.lg</span> file generated by the <span class='ec-lmtt-10'>tex4ht</span> command. This file contains information about the generated files, <span class='ec-lmtt-10'>CSS</span> instructions, calls to the external applications, instructions for image conversions, etc.</p>
<!-- l. 265 -->
<p class='indent'><span class='ec-lmtt-10'>t4ht</span> can be instructed to copy the generated files to an output directory, but it doesn’t preserve the directory structure. When the images are placed in a<br class='newline' />
subdirectory, they will be copied to the output directory, losing the directory structure. Links will be pointing to a non-existing subdirectory. The following command should copy all output files to the correct destinations.</p>
<pre class='verbatim' id='verbatim-17'>
$ make4ht -d outputdir filename.tex
</pre>
<!-- l. 275 -->
<p class='nopar'></p>
<!-- l. 279 -->
<p class='indent'><a id='image-conversion-and-postprocessing-of-the-generated-files'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>3.4</span> <a id='x1-120003.4'></a>Image conversion and postprocessing of the generated files</h4>
<!-- l. 281 -->
<p class='noindent'>TeX4ht&nbsp;can convert parts of the document to images. This is useful for diagrams or complicated math, for example.</p>
<!-- l. 284 -->
<p class='indent'>By default, the image conversion is configured in a <a href='https://www.tug.org/applications/tex4ht/mn34.html#mn35.html'><span class='ec-lmtt-10'>.env</span> file</a>. It has a bit of strange syntax, with operating system dependent rules. <span class='ec-lmtt-10'>make4ht</span> provides simpler means for the image conversion in the build files. It is possible to change the image conversion parameters without a need to modify the <span class='ec-lmtt-10'>.env</span> file. The process is
described in section <a href='#image-conversion'>5.4<!-- tex4ht:ref: sec:imageconversion  --></a>.</p>
<!-- l. 292 -->
<p class='indent'>It is also possible to post-process the generated output files. The post-processing can be done either using external programs such as <span class='ec-lmtt-10'>XSLT</span> processors and <span class='ec-lmtt-10'>HTML&nbsp;Tidy</span> or using <span class='ec-lmtt-10'>Lua</span> functions. More information can be found in section <a href='#file-matches'>5.3<!-- tex4ht:ref: sec:postprocessing  --></a>.</p>
<!-- l. 300 -->
<p class='indent'><a id='output-file-formats-and-extensions'></a></p>
<h3 class='sectionHead'><span class='titlemark'>4</span> <a id='x1-130004'></a>Output file formats and extensions</h3>
<!-- l. 304 -->
<p class='noindent'>The default output format used by <span class='ec-lmtt-10'>make4ht</span> is <span class='ec-lmtt-10'>html5</span>. A different format can be requested using the <span class='ec-lmtt-10'>--format</span> option. Supported formats are:</p>
<ul class='itemize1'>
<li class='itemize'><span class='ec-lmtt-10'>xhtml</span></li>
<li class='itemize'><span class='ec-lmtt-10'>html5</span></li>
<li class='itemize'><span class='ec-lmtt-10'>odt</span></li>
<li class='itemize'><span class='ec-lmtt-10'>tei</span></li>
<li class='itemize'><span class='ec-lmtt-10'>docbook</span></li>
</ul>
<!-- l. 322 -->
<p class='indent'>The <span class='ec-lmtt-10'>--format</span> option can be also used for extension loading.</p>
<!-- l. 325 -->
<p class='indent'><a id='extensions'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>4.1</span> <a id='x1-140004.1'></a>Extensions</h4>
<!-- l. 327 -->
<p class='noindent'>Extensions can be used to modify the build process without the need to use a build file. They may post-process the output files or request additional commands for the compilation.</p>
<!-- l. 331 -->
<p class='indent'>The extensions can be enabled or disabled by appending <span class='ec-lmtt-10'>+EXTENSION</span> or <span class='ec-lmtt-10'>-EXTENSION</span> after the output format name:</p>
<pre class='verbatim' id='verbatim-18'>
 $ make4ht -uf html5+tidy filename.tex
</pre>
<!-- l. 336 -->
<p class='nopar'></p>
<!-- l. 338 -->
<p class='indent'>Available extensions:</p>
<!-- l. 340 -->
<p class='indent'></p>
<dl class='description'>
<dt class='description'><!-- l. 341 --><br class='noindent' />
<span class='ec-lmbx-10'>common_filters</span><br />
<br /></dt>
<dd class='description'><!-- l. 341 -->
<p class='noindent'>clean the output HTML files using filters.</p>
</dd>
<dt class='description'><!-- l. 343 --><br class='noindent' />
<span class='ec-lmbx-10'>common_domfilters</span><br />
<br /></dt>
<dd class='description'><!-- l. 343 -->
<p class='noindent'>clean the HTML file using DOM filters. It is more powerful than <span class='ec-lmtt-10'>common_filters</span>. Used DOM filters are <span class='ec-lmtt-10'>fixinlines</span>, <span class='ec-lmtt-10'>idcolons</span>, <span class='ec-lmtt-10'>joincharacters</span>, <span class='ec-lmtt-10'>sectionid</span> and <span class='ec-lmtt-10'>tablerows</span>.</p>
</dd>
<dt class='description'><!-- l. 348 --><br class='noindent' />
<span class='ec-lmbx-10'>detect_engine</span><br />
<br /></dt>
<dd class='description'><!-- l. 348 -->
<p class='noindent'>detect engine and format necessary for the document compilation from the magic comments supported by LaTeX&nbsp;editors such as TeXShop or TeXWorks. Add something like the following line at the beginning of the main TeX&nbsp;file:</p>
<!-- l. 354 -->
<p class='noindent'><span class='ec-lmtt-10'>%!TEX&nbsp;TS-program&nbsp;=&nbsp;xelatex</span></p>
<!-- l. 356 -->
<p class='noindent'>It supports also Plain TeX, use for example <span class='ec-lmtt-10'>tex</span> or <span class='ec-lmtt-10'>luatex</span> as the program name.</p>
</dd>
<dt class='description'><!-- l. 358 --><br class='noindent' />
<span class='ec-lmbx-10'>dvisvgm_hashes</span><br />
<br /></dt>
<dd class='description'><!-- l. 358 -->
<p class='noindent'>efficient generation of SVG pictures using Dvisvgm. It can utilize multiple processor cores and generates only changed images.</p>
</dd>
<dt class='description'><!-- l. 361 --><br class='noindent' />
<span class='ec-lmbx-10'>join_colors</span><br />
<br /></dt>
<dd class='description'><!-- l. 361 -->
<p class='noindent'>load the <span class='ec-lmtt-10'>joincolors</span> domfilter for all HTML files.</p>
</dd>
<dt class='description'><!-- l. 363 --><br class='noindent' />
<span class='ec-lmbx-10'>latexmk_build</span><br />
<br /></dt>
<dd class='description'><!-- l. 363 -->
<p class='noindent'>use <a href='https://ctan.org/pkg/latexmk?lang=en'>Latexmk</a> for the LaTeX&nbsp;compilation.</p>
</dd>
<dt class='description'><!-- l. 366 --><br class='noindent' />
<span class='ec-lmbx-10'>mathjaxnode</span><br />
<br /></dt>
<dd class='description'><!-- l. 366 -->
<p class='noindent'>(<strong>deprecated</strong>, use <span class='ec-lmtt-10'>mjcli</span> extension instead) Old information: use <a href='https://github.com/pkra/mathjax-node-page/'>mathjax-node-page</a> to convert from MathML code to HTML + CSS or SVG. See <a href='#mathjaxsettings'>the available settings</a>.</p>
</dd>
<dt class='description'><!-- l. 372 --><br class='noindent' />
<span class='ec-lmbx-10'>mjcli</span><br />
<br /></dt>
<dd class='description'><!-- l. 372 -->
<p class='noindent'>use <a href='https://github.com/michal-h21/mjcli'>mjcli</a> to convert math in MathML or LaTeX&nbsp; format to plain HTML + CSS. MathML is used by default. If you want to use LaTeX&nbsp;math, add “mathjax” option on the command line (like <span class='ec-lmtt-10'>make4ht&nbsp;-f&nbsp;html5+mjcli&nbsp;filename.tex&nbsp;"mathjax"</span>). See <a href='#mathjaxsettings'>the available settings</a>.</p>
</dd>
<dt class='description'><!-- l. 378 --><br class='noindent' />
<span class='ec-lmbx-10'>odttemplate</span><br />
<br /></dt>
<dd class='description'><!-- l. 378 -->
<p class='noindent'>it automatically loads the <span class='ec-lmtt-10'>odttemplate</span> filter (page <a href='#filters'>38<!-- tex4ht:ref: sec:postprocessing  --></a>).</p>
</dd>
<dt class='description'><!-- l. 381 --><br class='noindent' />
<span class='ec-lmbx-10'>preprocess_input</span><br />
<br /></dt>
<dd class='description'><!-- l. 381 -->
<p class='noindent'>compilation of the formats supported by <a href='https://yihui.name/knitr/'>Knitr</a> (<span class='ec-lmtt-10'>.Rnw</span>, <span class='ec-lmtt-10'>.Rtex</span>, <span class='ec-lmtt-10'>.Rmd</span>, <span class='ec-lmtt-10'>.Rrst</span>) and also Markdown and reStructuredText formats. It requires <a href='https://www.r-project.org/'>R</a> + <a href='https://yihui.name/knitr/'>Knitr</a> installation, it requires also <a href='https://pandoc.org/'>Pandoc</a> for formats based on
Markdown or reStructuredText.</p>
</dd>
<dt class='description'><!-- l. 389 --><br class='noindent' />
<span class='ec-lmbx-10'>staticsite</span><br />
<br /></dt>
<dd class='description'><!-- l. 389 -->
<p class='noindent'>build the document in a form suitable for static site generators like <a href='https://jekyllrb.com/'>Jekyll</a>.</p>
</dd>
<dt class='description'><!-- l. 392 --><br class='noindent' />
<span class='ec-lmbx-10'>tidy</span><br />
<br /></dt>
<dd class='description'><!-- l. 392 -->
<p class='noindent'>clean the <span class='ec-lmtt-10'>HTML</span> files using the <span class='ec-lmtt-10'>tidy</span> command.</p>
</dd>
</dl>
<!-- l. 397 -->
<p class='indent'><a id='build-files'></a></p>
<h3 class='sectionHead'><span class='titlemark'>5</span> <a id='x1-150005'></a>Build files</h3>
<!-- l. 401 -->
<p class='noindent'><span class='ec-lmtt-10'>make4ht</span> supports build files. These are <span class='ec-lmtt-10'>Lua</span> scripts that can adjust the build process. They can request external applications like <span class='ec-lmtt-10'>BibTeX</span> or <span class='ec-lmtt-10'>Makeindex</span>, pass options to the commands, modify the image conversion process, or post-process the generated files.</p>
<!-- l. 407 -->
<p class='indent'><span class='ec-lmtt-10'>make4ht</span> tries to load default build file named as <span class='ec-lmtt-10'>filename&nbsp;+&nbsp;.mk4&nbsp;extension</span>. It is possible to select a different build file with <span class='ec-lmtt-10'>-e</span> or <span class='ec-lmtt-10'>--build-file</span> command line option.</p>
<!-- l. 412 -->
<p class='indent'>Sample build file:</p>
<pre class='verbatim' id='verbatim-19'>
Make:htlatex()
Make:match("html$", "tidy -m -xml -utf8 -q -i ${filename}")
</pre>
<!-- l. 417 -->
<p class='nopar'></p>
<!-- l. 419 -->
<p class='indent'><span class='ec-lmtt-10'>Make:htlatex()</span> is preconfigured command for calling LaTeX&nbsp;with the <span class='ec-lmtt-10'>tex4ht.sty</span> package loaded. In this example, it will be executed only once. After the compilation, the <span class='ec-lmtt-10'>tidy</span> command is executed on the output <span class='ec-lmtt-10'>HTML</span> files.</p>
<!-- l. 424 -->
<p class='indent'>Note that it is not necessary to call <span class='ec-lmtt-10'>tex4ht</span> and <span class='ec-lmtt-10'>t4ht</span> commands explicitly in the build file, they are called automatically.</p>
<!-- l. 428 -->
<p class='indent'><a id='user-commands'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>5.1</span> <a id='x1-160005.1'></a>User commands</h4>
<!-- l. 430 -->
<p class='noindent'>It is possible to add more commands like <span class='ec-lmtt-10'>Make:htlatex</span> using the <span class='ec-lmtt-10'>Make:add</span> command:</p>
<pre class='verbatim' id='verbatim-20'>
Make:add("name", "command", {settings table}, repetition)
</pre>
<!-- l. 435 -->
<p class='nopar'></p>
<!-- l. 437 -->
<p class='indent'>This defines the <span class='ec-lmtt-10'>name</span> command, which can be then executed using <span class='ec-lmtt-10'>Make:name()</span> command in the build file.</p>
<!-- l. 440 -->
<p class='indent'>The <span class='ec-lmtt-10'>name</span> and <span class='ec-lmtt-10'>command</span> parameters are required, the rest of the parameters are optional.</p>
<!-- l. 443 -->
<p class='indent'>The defined command receives a table with settings as a parameter at the call time. The default settings are provided by <span class='ec-lmtt-10'>make4ht</span>. Additional settings can be declared in the <span class='ec-lmtt-10'>Make:add</span> commands, user can also override the default settings when the command is executed in the build file:</p>
<pre class='verbatim' id='verbatim-21'>
Make:name({hello="world"})
</pre>
<!-- l. 451 -->
<p class='nopar'></p>
<!-- l. 453 -->
<p class='indent'>More information about settings, including the default settings provided by <span class='ec-lmtt-10'>make4ht</span>, can be found in section <a href='#the-settings-table'>5.6<!-- tex4ht:ref: sec:settings  --></a> on page <a href='#the-settings-table'>45<!-- tex4ht:ref: sec:settings  --></a>.</p>
<!-- l. 459 -->
<p class='indent'><a id='the-command-function'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>5.1.1</span> <a id='x1-170005.1.1'></a>The <span class='ec-lmtt-10'>command</span> function</h5>
<!-- l. 463 -->
<p class='noindent'>The <span class='ec-lmtt-10'>command</span> parameter can be either a string template or function:</p>
<pre class='verbatim' id='verbatim-22'>
Make:add("text", "echo hello, input file: ${input}")
</pre>
<!-- l. 468 -->
<p class='nopar'></p>
<!-- l. 470 -->
<p class='indent'>The template can get a variable value from the parameters table using a <span class='ec-lmtt-10'>${var_name}</span> placeholder. Templates are executed using the operating system, so they should invoke existing OS commands.</p>
<!-- l. 476 -->
<p class='indent'><a id='the-settings-table-table'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>5.1.2</span> <a id='x1-180005.1.2'></a>The <span class='ec-lmtt-10'>settings&nbsp;table</span> table</h5>
<!-- l. 478 -->
<p class='noindent'>The <span class='ec-lmtt-10'>settings&nbsp;table</span> parameter is optional. If it is present, it should be a table with new settings available in the command. It can also override the default <span class='ec-lmtt-10'>make4ht</span> settings for the defined command.</p>
<pre class='verbatim' id='verbatim-23'>
Make:add("sample_function", function(params)
  for k, v in pairs(params) do
    print(k..": "..v)
  end, {custom="Hello world"}
)
</pre>
<!-- l. 489 -->
<p class='nopar'></p>
<!-- l. 492 -->
<p class='indent'><a id='repetition'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>5.1.3</span> <a id='x1-190005.1.3'></a>Repetition</h5>
<!-- l. 494 -->
<p class='noindent'>The <span class='ec-lmtt-10'>repetition</span> parameter specifies the maximum number of executions of the particular command. This is used for instance for <span class='ec-lmtt-10'>tex4ht</span> and <span class='ec-lmtt-10'>t4ht</span> commands, as they should be executed only once in the compilation. They would be executed multiple times when they are included in the build file, as they are called by <span class='ec-lmtt-10'>make4ht</span> by default. Because these commands allow only
one <span class='ec-lmtt-10'>repetition</span>, the second execution is blocked.</p>
<!-- l. 503 -->
<p class='indent'><a id='expected-exit-code'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>5.1.4</span> <a id='x1-200005.1.4'></a>Expected exit code</h5>
<!-- l. 505 -->
<p class='noindent'>You can set the expected exit code from a command with a <span class='ec-lmtt-10'>correct_exit</span> key in the settings table. The compilation will be terminated when the command returns a different exit code.</p>
<pre class='verbatim' id='verbatim-24'>
Make:add("biber", "biber ${input}", {correct_exit=0})
</pre>
<!-- l. 511 -->
<p class='nopar'></p>
<!-- l. 513 -->
<p class='indent'>Commands that execute lua functions can return the numerical values using the <span class='ec-lmtt-10'>return</span> statement.</p>
<!-- l. 516 -->
<p class='indent'>This mechanism isn’t used for TeX, because it doesn’t differentiate between fatal and non-fatal errors. It returns the same exit code in all cases. Because of this, log parsing is used for a fatal error detection instead. Error code value <span class='ec-lmtt-10'>1</span> is returned in the case of a fatal error, <span class='ec-lmtt-10'>0</span> is used otherwise. The <span class='ec-lmtt-10'>Make.testlogfile</span> function can be used in the build file to detect compilation errors in
the TeX log file.</p>
<!-- l. 525 -->
<p class='indent'><a id='provided-commands'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>5.2</span> <a id='x1-210005.2'></a>Provided commands</h4>
<!-- l. 527 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><!-- l. 528 --><br class='noindent' />
<span class='ec-lmtk-10'>Make:htlatex</span><br />
<br /></dt>
<dd class='description'><!-- l. 528 -->
<p class='noindent'>One call to the TeX engine with special configuration for loading of the <span class='ec-lmtt-10'>tex4ht.sty</span> package.</p>
</dd>
<dt class='description'><!-- l. 531 --><br class='noindent' />
<span class='ec-lmtk-10'>Make:clean</span><br />
<br /></dt>
<dd class='description'><!-- l. 531 -->
<p class='noindent'>This command removes all generated files, including images, HTML files and various auxilary files, from the current directory. It keeps files whose file names don’t match the input file name. It is preferable to use <span class='ec-lmtt-10'>make4ht&nbsp;-m&nbsp;clean&nbsp;filename.tex</span> to clean output files.</p>
</dd>
<dt class='description'><!-- l. 536 --><br class='noindent' />
<span class='ec-lmtk-10'>Make:httex</span><br />
<br /></dt>
<dd class='description'><!-- l. 536 -->
<p class='noindent'>Variant of <span class='ec-lmtt-10'>Make:htlatex</span> suitable for Plain TeX.</p>
</dd>
<dt class='description'><!-- l. 538 --><br class='noindent' />
<span class='ec-lmtk-10'>Make:latexmk</span><br />
<br /></dt>
<dd class='description'><!-- l. 538 -->
<p class='noindent'>Use <span class='ec-lmtt-10'>Latexmk</span> for the document compilation. <span class='ec-lmtt-10'>tex4ht.sty</span> will be loaded automatically.</p>
</dd>
<dt class='description'><!-- l. 541 --><br class='noindent' />
<span class='ec-lmtk-10'>Make:tex4ht</span><br />
<br /></dt>
<dd class='description'><!-- l. 541 -->
<p class='noindent'>Process the <span class='ec-lmtt-10'>DVI</span> file and create output files.</p>
</dd>
<dt class='description'><!-- l. 543 --><br class='noindent' />
<span class='ec-lmtk-10'>Make:t4ht</span><br />
<br /></dt>
<dd class='description'><!-- l. 543 -->
<p class='noindent'>Create the CSS file and generate images.</p>
</dd>
<dt class='description'><!-- l. 545 --><br class='noindent' />
<span class='ec-lmtk-10'>Make:biber</span><br />
<br /></dt>
<dd class='description'><!-- l. 545 -->
<p class='noindent'>Process bibliography using the <span class='ec-lmtt-10'>biber</span> command.</p>
</dd>
<dt class='description'><!-- l. 547 --><br class='noindent' />
<span class='ec-lmtk-10'>Make:pythontex</span><br />
<br /></dt>
<dd class='description'><!-- l. 547 -->
<p class='noindent'>Process the input file using <span class='ec-lmtt-10'>pythontex</span>.</p>
</dd>
<dt class='description'><!-- l. 549 --><br class='noindent' />
<span class='ec-lmtk-10'>Make:bibtex</span><br />
<br /></dt>
<dd class='description'><!-- l. 549 -->
<p class='noindent'>Process bibliography using the <span class='ec-lmtt-10'>bibtex</span> command.</p>
</dd>
<dt class='description'><!-- l. 551 --><br class='noindent' />
<span class='ec-lmtk-10'>Make:xindy</span><br />
<br /></dt>
<dd class='description'><!-- l. 551 -->
<p class='noindent'>Generate index using Xindy index processor.</p>
</dd>
<dt class='description'><!-- l. 553 --><br class='noindent' />
<span class='ec-lmtk-10'>Make:makeindex</span><br />
<br /></dt>
<dd class='description'><!-- l. 553 -->
<p class='noindent'>Generate index using the Makeindex command.</p>
</dd>
<dt class='description'><!-- l. 555 --><br class='noindent' />
<span class='ec-lmtk-10'>Make:xindex</span><br />
<br /></dt>
<dd class='description'><!-- l. 555 -->
<p class='noindent'>Generate index using the Xindex command.</p>
</dd>
</dl>
<!-- l. 560 -->
<p class='noindent'><a id='file-matches'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>5.3</span> <a id='x1-220005.3'></a>File matches</h4>
<!-- l. 564 -->
<p class='noindent'>Another type of action that can be specified in the build file is <span class='ec-lmtt-10'>Make:match</span>. It can be used to post-process the generated files:</p>
<pre class='verbatim' id='verbatim-25'>
Make:match("html$", "tidy -m -xml -utf8 -q -i ${filename}")
</pre>
<!-- l. 569 -->
<p class='nopar'></p>
<!-- l. 571 -->
<p class='indent'>The above example will clean all output <span class='ec-lmtt-10'>HTML</span> files using the <span class='ec-lmtt-10'>tidy</span> command.</p>
<!-- l. 574 -->
<p class='indent'>The <span class='ec-lmtt-10'>Make:match</span> action tests output filenames using a <span class='ec-lmtt-10'>Lua</span> pattern matching function.<br class='newline' />
It executes a command or a function, specified in the second argument, on files whose filenames match the pattern.</p>
<!-- l. 579 -->
<p class='indent'>The commands to be executed can be specified as strings. They can contain <span class='ec-lmtt-10'>${var_name}</span> placeholders, which are replaced with corresponding variables from the <span class='ec-lmtt-10'>settings</span> table. The templating system was described in subsection <a href='#the-command-function'>5.1.1<!-- tex4ht:ref: sec:commandfunction  --></a>. There is an additional variable available in this table, called <span class='ec-lmtt-10'>filename</span>. It contains the
name of the current output file.</p>
<!-- l. 586 -->
<p class='indent'>If a function is used instead, it will get two parameters. The first one is the current filename, the second one is the <span class='ec-lmtt-10'>settings</span> table.</p>
<pre class='verbatim' id='verbatim-26'>
Make:match("html$", function(filename, settings)
  print("Post-processing file: ".. filename)
  print("Available settings")
  for k,v in pairs(settings)
    print(k,v)
  end
  return true
</pre>
<!-- l. 597 -->
<p class='nopar'></p>
<!-- l. 599 -->
<p class='indent'>end)</p>
<!-- l. 601 -->
<p class='indent'>Multiple post-processing actions can be executed on each filename. The Lua action functions can return an exit code. If the exit code is false, the execution of the post-processing chain for the current file will be terminated.</p>
<!-- l. 607 -->
<p class='indent'><a id='filters'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>5.3.1</span> <a id='x1-230005.3.1'></a>Filters</h5>
<!-- l. 611 -->
<p class='noindent'>To make it easier to post-process the generated files using the <span class='ec-lmtt-10'>match</span> actions, <span class='ec-lmtt-10'>make4ht</span> provides a filtering mechanism thanks to the <span class='ec-lmtt-10'>make4ht-filter</span> module.</p>
<!-- l. 615 -->
<p class='indent'>The <span class='ec-lmtt-10'>make4ht-filter</span> module returns a function that can be used for the filter chain building. Multiple filters can be chained into a pipeline. Each filter can modify the string that is passed to it from the previous filters. The changes are then saved to the processed file.</p>
<!-- l. 620 -->
<p class='indent'>Several built-in filters are available, it is also possible to create new ones.</p>
<!-- l. 623 -->
<p class='indent'>Example that use only the built-in filters:</p>
<pre class='verbatim' id='verbatim-27'>
local filter = require "make4ht-filter"
local process = filter{"cleanspan", "fixligatures", "hruletohr"}
Make:htlatex()
Make:match("html$",process)
</pre>
<!-- l. 630 -->
<p class='nopar'></p>
<!-- l. 632 -->
<p class='indent'>Function <span class='ec-lmtt-10'>filter</span> accepts also function arguments, in this case this function takes file contents as a parameter and modified contents are returned.</p>
<!-- l. 636 -->
<p class='indent'>Example with custom filter:</p>
<pre class='verbatim' id='verbatim-28'>
local filter  = require "make4ht-filter"
local changea = function(s) return s:gsub("a","z") end
local process = filter{"cleanspan", "fixligatures", changea}
Make:htlatex()
Make:match("html$",process)
</pre>
<!-- l. 644 -->
<p class='nopar'></p>
<!-- l. 646 -->
<p class='indent'>In this example, spurious span elements are joined, ligatures are decomposed, and then all letters “a” are replaced with “z” letters.</p>
<!-- l. 649 -->
<p class='indent'>Built-in filters are the following:</p>
<!-- l. 651 -->
<p class='indent'></p>
<dl class='description'>
<dt class='description'><!-- l. 652 --><br class='noindent' />
<span class='ec-lmbx-10'>cleanspan</span><br />
<br /></dt>
<dd class='description'><!-- l. 652 -->
<p class='noindent'>clean spurious span elements when accented characters are used</p>
</dd>
<dt class='description'><!-- l. 654 --><br class='noindent' />
<span class='ec-lmbx-10'>cleanspan-nat</span><br />
<br /></dt>
<dd class='description'><!-- l. 654 -->
<p class='noindent'>alternative clean span filter, provided by Nat Kuhn</p>
</dd>
<dt class='description'><!-- l. 656 --><br class='noindent' />
<span class='ec-lmbx-10'>fixligatures</span><br />
<br /></dt>
<dd class='description'><!-- l. 656 -->
<p class='noindent'>decompose ligatures to base characters</p>
</dd>
<dt class='description'><!-- l. 658 --><br class='noindent' />
<span class='ec-lmbx-10'>hruletohr</span><br />
<br /></dt>
<dd class='description'><!-- l. 658 -->
<p class='noindent'><span class='ec-lmtt-10'>\hrule</span> commands are translated to series of underscore characters by TeX4ht, this filter translates these underscores to <span class='ec-lmtt-10'>&lt;hr&gt;</span> elements</p>
</dd>
<dt class='description'><!-- l. 662 --><br class='noindent' />
<span class='ec-lmbx-10'>entites</span><br />
<br /></dt>
<dd class='description'><!-- l. 662 -->
<p class='noindent'>convert prohibited named entities to numeric entities (only <span class='ec-lmtt-10'>&amp;nbsp;</span> currently).</p>
</dd>
<dt class='description'><!-- l. 665 --><br class='noindent' />
<span class='ec-lmbx-10'>fix-links</span><br />
<br /></dt>
<dd class='description'><!-- l. 665 -->
<p class='noindent'>replace colons in local links and <span class='ec-lmtt-10'>id</span> attributes with underscores. Some cross-reference commands may produce colons in internal links, which results in a validation error.</p>
</dd>
<dt class='description'><!-- l. 669 --><br class='noindent' />
<span class='ec-lmbx-10'>mathjaxnode</span><br />
<br /></dt>
<dd class='description'><!-- l. 669 -->
<p class='noindent'>(<strong>deprecated</strong>, use <span class='ec-lmtt-10'>mjcli</span> extension instead) Old information: use <a href='https://github.com/pkra/mathjax-node-page/'>mathjax-node-page</a> to convert from MathML code to HTML + CSS or SVG. See <a href='#mathjaxsettings'>the available settings</a>.</p>
</dd>
<dt class='description'><!-- l. 675 --><br class='noindent' />
<span class='ec-lmbx-10'>mjcli</span><br />
<br /></dt>
<dd class='description'><!-- l. 675 -->
<p class='noindent'>use <a href='https://github.com/michal-h21/mjcli'>mjcli</a> to convert math in MathML or LaTeX&nbsp; format to plain HTML + CSS. See <a href='#mathjaxsettings'>the available settings</a>.</p>
</dd>
<dt class='description'><!-- l. 679 --><br class='noindent' />
<span class='ec-lmbx-10'>odttemplate</span><br />
<br /></dt>
<dd class='description'><!-- l. 679 -->
<p class='noindent'>use styles from another <span class='ec-lmtt-10'>ODT</span> file serving as a template in the current document. It works for the <span class='ec-lmtt-10'>styles.xml</span> file in the <span class='ec-lmtt-10'>ODT</span> file. During the compilation, this file is named as <span class='ec-lmtt-10'>\jobname.4oy</span>.</p>
</dd>
<dt class='description'><!-- l. 684 --><br class='noindent' />
<span class='ec-lmbx-10'>staticsite</span><br />
<br /></dt>
<dd class='description'><!-- l. 684 -->
<p class='noindent'>create HTML files in a format suitable for static site generators such as <a href='https://jekyllrb.com/'>Jekyll</a></p>
</dd>
<dt class='description'><!-- l. 687 --><br class='noindent' />
<span class='ec-lmbx-10'>svg-height</span><br />
<br /></dt>
<dd class='description'><!-- l. 687 -->
<p class='noindent'>some SVG images produced by <span class='ec-lmtt-10'>dvisvgm</span> seem to have wrong dimensions. This filter tries to set the correct image size.</p>
</dd>
</dl>
<!-- l. 693 -->
<p class='indent'><a id='dom-filters'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>5.3.2</span> <a id='x1-240005.3.2'></a>DOM filters</h5>
<!-- l. 695 -->
<p class='noindent'>DOM filters are variants of filters that use the <a href='https://ctan.org/pkg/luaxml'><span class='ec-lmtt-10'>LuaXML</span></a> library to modify directly the XML object. This enables more powerful operations than the regex-based filters from the previous section.</p>
<!-- l. 700 -->
<p class='indent'>Example:</p>
<pre class='verbatim' id='verbatim-29'>
local domfilter = require "make4ht-domfilter"
local process = domfilter {"joincharacters"}
Make:match("html$", process)
</pre>
<!-- l. 706 -->
<p class='nopar'></p>
<!-- l. 708 -->
<p class='indent'>Available DOM filters:</p>
<!-- l. 710 -->
<p class='indent'></p>
<dl class='description'>
<dt class='description'><!-- l. 711 --><br class='noindent' />
<span class='ec-lmbx-10'>aeneas</span><br />
<br /></dt>
<dd class='description'><!-- l. 711 -->
<p class='noindent'><a href='https://www.readbeyond.it/aeneas/'>Aeneas</a> is a tool for automagical synchronization of text and audio. This filter modifies the HTML code to support synchronization.</p>
</dd>
<dt class='description'><!-- l. 715 --><br class='noindent' />
<span class='ec-lmbx-10'>booktabs</span><br />
<br /></dt>
<dd class='description'><!-- l. 715 -->
<p class='noindent'>fix lines produced by the <span class='ec-lmtt-10'>\cmidrule</span> command provided by the Booktabs package.</p>
</dd>
<dt class='description'><!-- l. 718 --><br class='noindent' />
<span class='ec-lmbx-10'>collapsetoc</span><br />
<br /></dt>
<dd class='description'><!-- l. 718 -->
<p class='noindent'>collapse table of contents to contain only top-level sectioning level and sections on the current page.</p>
</dd>
<dt class='description'><!-- l. 721 --><br class='noindent' />
<span class='ec-lmbx-10'>fixinlines</span><br />
<br /></dt>
<dd class='description'><!-- l. 721 -->
<p class='noindent'>put all inline elements which are direct children of the <span class='ec-lmtt-10'>&lt;body&gt;</span> elements to a paragraph.</p>
</dd>
<dt class='description'><!-- l. 724 --><br class='noindent' />
<span class='ec-lmbx-10'>idcolons</span><br />
<br /></dt>
<dd class='description'><!-- l. 724 -->
<p class='noindent'>replace the colon (<span class='ec-lmtt-10'>:</span>) character in internal links and <span class='ec-lmtt-10'>id</span> attributes. They cause validation issues.</p>
</dd>
<dt class='description'><!-- l. 727 --><br class='noindent' />
<span class='ec-lmbx-10'>joincharacters</span><br />
<br /></dt>
<dd class='description'><!-- l. 727 -->
<p class='noindent'>join consecutive <span class='ec-lmtt-10'>&lt;span&gt;</span> or <span class='ec-lmtt-10'>&lt;mn&gt;</span> elements. This DOM filter supersedes the <span class='ec-lmtt-10'>cleanspan</span> filter.</p>
</dd>
<dt class='description'><!-- l. 731 --><br class='noindent' />
<span class='ec-lmbx-10'>joincolors</span><br />
<br /></dt>
<dd class='description'><!-- l. 731 -->
<p class='noindent'>many <span class='ec-lmtt-10'>&lt;span&gt;</span> elements with unique <span class='ec-lmtt-10'>id</span> attributes are created when LaTeX&nbsp;colors are being used in the document. A CSS rule is added for each of these elements, which may result in substantial growth of the CSS file. This filter replaces these rules with a common one for elements with the same color value.</p>
</dd>
<dt class='description'><!-- l. 737 --><br class='noindent' />
<span class='ec-lmbx-10'>odtimagesize</span><br />
<br /></dt>
<dd class='description'><!-- l. 737 -->
<p class='noindent'>set correct dimensions for images in the ODT format. It is no longer used, as the dimensions are set by TeX4ht itself.</p>
</dd>
<dt class='description'><!-- l. 740 --><br class='noindent' />
<span class='ec-lmbx-10'>odtpartable</span><br />
<br /></dt>
<dd class='description'><!-- l. 740 -->
<p class='noindent'>resolve tables nested inside paragraphs, which is invalid in the ODT format.</p>
</dd>
<dt class='description'><!-- l. 743 --><br class='noindent' />
<span class='ec-lmbx-10'>tablerows</span><br />
<br /></dt>
<dd class='description'><!-- l. 743 -->
<p class='noindent'>remove spurious rows from HTML tables.</p>
</dd>
<dt class='description'><!-- l. 745 --><br class='noindent' />
<span class='ec-lmbx-10'>mathmlfixes</span><br />
<br /></dt>
<dd class='description'><!-- l. 745 -->
<p class='noindent'>fix common issues for MathML.</p>
</dd>
<dt class='description'><!-- l. 747 --><br class='noindent' />
<span class='ec-lmbx-10'>sectionid</span><br />
<br /></dt>
<dd class='description'><!-- l. 747 -->
<p class='noindent'>create <span class='ec-lmtt-10'>id</span> attribute for HTML sectioning elements derived from the section title. It also updates links to these sections. Use the <span class='ec-lmtt-10'>notoc</span> command line option to prevent that.</p>
</dd>
<dt class='description'><!-- l. 751 --><br class='noindent' />
<span class='ec-lmbx-10'>t4htlinks</span><br />
<br /></dt>
<dd class='description'><!-- l. 751 -->
<p class='noindent'>fix hyperlinks in the ODT format.</p>
</dd>
</dl>
<!-- l. 756 -->
<p class='indent'><a id='image-conversion'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>5.4</span> <a id='x1-250005.4'></a>Image conversion</h4>
<!-- l. 760 -->
<p class='noindent'>It is possible to convert parts of the LaTeX&nbsp;input as pictures. It can be used for preserving the appearance of math or diagrams, for example.</p>
<!-- l. 763 -->
<p class='indent'>These pictures are stored in a special <span class='ec-lmtt-10'>DVI</span> file, which can be processed by a <span class='ec-lmtt-10'>DVI</span> to image commands, such as <span class='ec-lmtt-10'>dvipng</span> or <span class='ec-lmtt-10'>dvisvgm</span>.</p>
<!-- l. 767 -->
<p class='indent'>This conversion is normally configured in the <span class='ec-lmtt-10'>tex4ht.env</span> file. This file is system dependent and it has quite an unintuitive syntax. The configuration is processed by the <span class='ec-lmtt-10'>t4ht</span> application and the conversion command is called for all pictures.</p>
<!-- l. 772 -->
<p class='indent'>It is possible to disable <span class='ec-lmtt-10'>t4ht</span> image processing and configure image conversion in the build file using the <span class='ec-lmtt-10'>image</span> action:</p>
<pre class='verbatim' id='verbatim-30'>
Make:image("png$",
"dvipng -bg Transparent -T tight -o ${output}  -pp ${page} ${source}")
</pre>
<!-- l. 778 -->
<p class='nopar'></p>
<!-- l. 780 -->
<p class='indent'><span class='ec-lmtt-10'>Make:image</span> takes two parameters, a <span class='ec-lmtt-10'>Lua</span> pattern to match the image name, and the action.</p>
<!-- l. 783 -->
<p class='indent'>Action can be either a string template with the conversion command or a function that takes a table with parameters as an argument.</p>
<!-- l. 786 -->
<p class='indent'>There are three parameters:</p>
<ul class='itemize1'>
<li class='itemize'><span class='ec-lmtt-10'>output</span> - output image filename</li>
<li class='itemize'><span class='ec-lmtt-10'>source</span> - <span class='ec-lmtt-10'>DVI</span> file with the pictures</li>
<li class='itemize'><span class='ec-lmtt-10'>page</span> - page number of the converted image</li>
</ul>
<!-- l. 800 -->
<p class='indent'><a id='the-mode-variable'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>5.5</span> <a id='x1-260005.5'></a>The <span class='ec-lmtt-10'>mode</span> variable</h4>
<!-- l. 802 -->
<p class='noindent'>The <span class='ec-lmtt-10'>mode</span> variable available in the build process contains contents of the <span class='ec-lmtt-10'>--mode</span> command line option. It can be used to run some commands conditionally. For example:</p>
<pre class='verbatim' id='verbatim-31'>
 if mode == "draft" then
   Make:htlatex{}
 else
   Make:htlatex{}
   Make:htlatex{}
   Make:htlatex{}
 end
</pre>
<!-- l. 814 -->
<p class='nopar'></p>
<!-- l. 816 -->
<p class='indent'>In this example (which is the default configuration used by <span class='ec-lmtt-10'>make4ht</span>), LaTeX&nbsp;is called only once when <span class='ec-lmtt-10'>make4ht</span> is called with the <span class='ec-lmtt-10'>draft</span> mode:</p>
<pre class='verbatim' id='verbatim-32'>
make4ht -m draft filename
</pre>
<!-- l. 822 -->
<p class='nopar'></p>
<!-- l. 826 -->
<p class='indent'><a id='the-settings-table'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>5.6</span> <a id='x1-270005.6'></a>The <span class='ec-lmtt-10'>settings</span> table</h4>
<!-- l. 830 -->
<p class='noindent'>It is possible to access the parameters outside commands, file matches and image conversion functions. For example, to convert the document to the <span class='ec-lmtt-10'>OpenDocument&nbsp;Format&nbsp;(ODT)</span>, the following settings can be used. They are based on the <span class='ec-lmtt-10'>oolatex</span> command:</p>
<pre class='verbatim' id='verbatim-33'>
settings.tex4ht_sty_par = settings.tex4ht_sty_par ..",ooffice"
settings.tex4ht_par = settings.tex4ht_par .. " ooffice/! -cmozhtf"
settings.t4ht_par = settings.t4ht_par .. " -cooxtpipes -coo "
</pre>
<!-- l. 839 -->
<p class='nopar'></p>
<!-- l. 841 -->
<p class='indent'>(Note that it is possible to use the <span class='ec-lmtt-10'>--format&nbsp;odt</span> option which is superior to the previous code. This example is intended just as an illustration)</p>
<!-- l. 845 -->
<p class='indent'>There are some functions to simplify access to the settings:</p>
<!-- l. 847 -->
<p class='indent'></p>
<dl class='description'>
<dt class='description'><!-- l. 848 --><br class='noindent' />
<span class='ec-lmtk-10'>set_settings{parameters}</span><br />
<br /></dt>
<dd class='description'><!-- l. 848 -->
<p class='noindent'>overwrite settings with values from a passed table</p>
</dd>
<dt class='description'><!-- l. 850 --><br class='noindent' />
<span class='ec-lmtk-10'>settings_add{parameters}</span><br />
<br /></dt>
<dd class='description'><!-- l. 850 -->
<p class='noindent'>add values to the current settings</p>
</dd>
<dt class='description'><!-- l. 852 --><br class='noindent' />
<span class='ec-lmtk-10'>filter_settings&nbsp;"filter&nbsp;name"&nbsp;{parameters}</span><br />
<br /></dt>
<dd class='description'><!-- l. 852 -->
<p class='noindent'>set settings for a filter</p>
</dd>
<dt class='description'><!-- l. 854 --><br class='noindent' />
<span class='ec-lmtk-10'>get_filter_settings(name)</span><br />
<br /></dt>
<dd class='description'><!-- l. 854 -->
<p class='noindent'>get settings for a filter</p>
</dd>
</dl>
<!-- l. 858 -->
<p class='indent'>For example, it is possible to simplify the sample from the previous code listings:</p>
<pre class='verbatim' id='verbatim-34'>
settings_add {
  tex4ht_sty_par =",ooffice",
  tex4ht_par = " ooffice/! -cmozhtf",
  t4ht_par = " -cooxtpipes -coo "
}
</pre>
<!-- l. 867 -->
<p class='nopar'></p>
<!-- l. 869 -->
<p class='indent'>Settings for filters and extensions can be set using <span class='ec-lmtt-10'>filter_settings</span>:</p>
<pre class='verbatim' id='verbatim-35'>
filter_settings "test" {
  hello = "world"
}
</pre>
<!-- l. 876 -->
<p class='nopar'></p>
<!-- l. 878 -->
<p class='indent'>These settings can be retrieved in the extensions and filters using the <span class='ec-lmtt-10'>get_filter_settings</span> function:</p>
<pre class='verbatim' id='verbatim-36'>
function test(input)
   local options = get_filter_settings("test")
   print(options.hello)
   return input
end
</pre>
<!-- l. 888 -->
<p class='nopar'></p>
<!-- l. 891 -->
<p class='indent'><a id='default-settings'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>5.6.1</span> <a id='x1-280005.6.1'></a>Default settings</h5>
<!-- l. 893 -->
<p class='noindent'>The default parameters are the following:</p>
<!-- l. 895 -->
<p class='indent'></p>
<dl class='description'>
<dt class='description'><!-- l. 896 --><br class='noindent' />
<span class='ec-lmtk-10'>htlatex</span><br />
<br /></dt>
<dd class='description'><!-- l. 896 -->
<p class='noindent'>used TeX&nbsp;engine</p>
</dd>
<dt class='description'><!-- l. 898 --><br class='noindent' />
<span class='ec-lmtk-10'>input</span><br />
<br /></dt>
<dd class='description'><!-- l. 898 -->
<p class='noindent'>content of <span class='ec-lmtt-10'>\jobname</span>, see also the <span class='ec-lmtt-10'>tex_file</span> parameter.</p>
</dd>
<dt class='description'><!-- l. 901 --><br class='noindent' />
<span class='ec-lmtk-10'>interaction</span><br />
<br /></dt>
<dd class='description'><!-- l. 901 -->
<p class='noindent'>interaction mode for the TeX&nbsp;engine. The default value is <span class='ec-lmtt-10'>batchmode</span> to suppress user input on compilation errors. It also suppresses most of the TeX&nbsp; compilation log output. Use the <span class='ec-lmtt-10'>errorstopmode</span> for the default behavior.</p>
</dd>
<dt class='description'><!-- l. 906 --><br class='noindent' />
<span class='ec-lmtk-10'>tex_file</span><br />
<br /></dt>
<dd class='description'><!-- l. 906 -->
<p class='noindent'>input TeX&nbsp;filename</p>
</dd>
<dt class='description'><!-- l. 908 --><br class='noindent' />
<span class='ec-lmtk-10'>latex_par</span><br />
<br /></dt>
<dd class='description'><!-- l. 908 -->
<p class='noindent'>command line parameters to the TeX&nbsp;engine</p>
</dd>
<dt class='description'><!-- l. 910 --><br class='noindent' />
<span class='ec-lmtk-10'>packages</span><br />
<br /></dt>
<dd class='description'><!-- l. 910 -->
<p class='noindent'>additional LaTeX&nbsp;code inserted before <span class='ec-lmtt-10'>\documentclass</span>. Useful for passing options to packages used in the document or to load additional packages.</p>
</dd>
<dt class='description'><!-- l. 914 --><br class='noindent' />
<span class='ec-lmtk-10'>tex4ht_sty_par</span><br />
<br /></dt>
<dd class='description'><!-- l. 914 -->
<p class='noindent'>options for <span class='ec-lmtt-10'>tex4ht.sty</span></p>
</dd>
<dt class='description'><!-- l. 916 --><br class='noindent' />
<span class='ec-lmtk-10'>tex4ht_par</span><br />
<br /></dt>
<dd class='description'><!-- l. 916 -->
<p class='noindent'>command line options for the <span class='ec-lmtt-10'>tex4ht</span> command</p>
</dd>
<dt class='description'><!-- l. 918 --><br class='noindent' />
<span class='ec-lmtk-10'>t4ht_par</span><br />
<br /></dt>
<dd class='description'><!-- l. 918 -->
<p class='noindent'>command line options for the <span class='ec-lmtt-10'>t4ht</span> command</p>
</dd>
<dt class='description'><!-- l. 920 --><br class='noindent' />
<span class='ec-lmtk-10'>outdir</span><br />
<br /></dt>
<dd class='description'><!-- l. 920 -->
<p class='noindent'>the output directory</p>
</dd>
<dt class='description'><!-- l. 922 --><br class='noindent' />
<span class='ec-lmtk-10'>correct_exit</span><br />
<br /></dt>
<dd class='description'><!-- l. 922 -->
<p class='noindent'>expected <span class='ec-lmtt-10'>exit&nbsp;code</span> from the command. The compilation will be terminated if the exit code of the executed command has a different value.</p>
</dd>
</dl>
<!-- l. 930 -->
<p class='indent'><a id='configfile'></a></p>
<h3 class='sectionHead' id='-makeht-configuration-file'><span class='titlemark'>6</span> <a id='x1-290006'></a><span class='ec-lmtt-10'>make4ht</span> configuration file</h3>
<!-- l. 932 -->
<p class='noindent'>It is possible to globally modify the build settings using the configuration file. It is a special version of a build file where the global settings can be set.</p>
<!-- l. 936 -->
<p class='indent'>Common tasks for the configuration file can be a declaration of the new commands, loading of the default filters or specification of a default build sequence.</p>
<!-- l. 940 -->
<p class='indent'>One additional functionality not available in the build files are commands for enabling and disabling of extensions.</p>
<!-- l. 944 -->
<p class='indent'><a id='location'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>6.1</span> <a id='x1-300006.1'></a>Location</h4>
<!-- l. 946 -->
<p class='noindent'>The configuration file can be saved either in the <span class='ec-lmtt-10'>$HOME/.config/make4ht/config.lua</span> file, or in the <span class='ec-lmtt-10'>.make4ht</span> file placed in the current directory or it’s parent directories (up to the <span class='ec-lmtt-10'>$HOME</span> directory).</p>
<!-- l. 952 -->
<p class='indent'><a id='additional-commands'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>6.2</span> <a id='x1-310006.2'></a>Additional commands</h4>
<!-- l. 954 -->
<p class='noindent'>There are two additional commands:</p>
<!-- l. 956 -->
<p class='indent'></p>
<dl class='description'>
<dt class='description'><!-- l. 957 --><br class='noindent' />
<span class='ec-lmtk-10'>Make:enable_extension(name)</span><br />
<br /></dt>
<dd class='description'><!-- l. 957 -->
<p class='noindent'>require extension</p>
</dd>
<dt class='description'><!-- l. 959 --><br class='noindent' />
<span class='ec-lmtk-10'>Make:disable_extension(name)</span><br />
<br /></dt>
<dd class='description'><!-- l. 959 -->
<p class='noindent'>disable extension</p>
</dd>
</dl>
<!-- l. 964 -->
<p class='indent'><a id='example'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>6.3</span> <a id='x1-320006.3'></a>Example</h4>
<!-- l. 966 -->
<p class='noindent'>The following example of the configuration file adds support for the <span class='ec-lmtt-10'>biber</span> command, requires <span class='ec-lmtt-10'>common_domfilters</span> extension and requires MathML output for math.</p>
<pre class='verbatim' id='verbatim-37'>
Make:add("biber", "biber ${input}")
Make:enable_extension "common_domfilters"
settings_add {
  tex4ht_sty_par =",mathml"
}
</pre>
<!-- l. 976 -->
<p class='nopar'></p>
<!-- l. 980 -->
<p class='indent'><a id='list-of-available-settings-for-filters-and-extensions.'></a></p>
<h3 class='sectionHead' id='list-of-available-settings-for-filters-and-extensions'><span class='titlemark'>7</span> <a id='x1-330007'></a>List of available settings for filters and extensions.</h3>
<!-- l. 982 -->
<p class='noindent'>These settings may be set using <span class='ec-lmtt-10'>filter_settings</span> function in a build file or in the <span class='ec-lmtt-10'>make4ht</span> configuration file.</p>
<!-- l. 986 -->
<p class='indent'><a id='indexing-commands'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>7.1</span> <a id='x1-340007.1'></a>Indexing commands</h4>
<!-- l. 988 -->
<p class='noindent'>The indexing commands (like <span class='ec-lmtt-10'>xindy</span> or <span class='ec-lmtt-10'>makeindex</span>) use some common settings.</p>
<!-- l. 991 -->
<p class='indent'></p>
<dl class='description'>
<dt class='description'><!-- l. 992 --><br class='noindent' />
<span class='ec-lmbx-10'>idxfile</span><br />
<br /></dt>
<dd class='description'><!-- l. 992 -->
<p class='noindent'>name of the <span class='ec-lmtt-10'>.idx</span> file. Default value is <span class='ec-lmtt-10'>\jobname.idx</span>.</p>
</dd>
<dt class='description'><!-- l. 995 --><br class='noindent' />
<span class='ec-lmbx-10'>indfile</span><br />
<br /></dt>
<dd class='description'><!-- l. 995 -->
<p class='noindent'>name of the <span class='ec-lmtt-10'>.ind</span> file. Default value is the same as <span class='ec-lmtt-10'>idxfile</span> with the file extension changed to <span class='ec-lmtt-10'>.ind</span>.</p>
</dd>
</dl>
<!-- l. 1000 -->
<p class='indent'>Each indexing command can have some additional settings.</p>
<!-- l. 1004 -->
<p class='indent'><a id='the-xindy-command'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>7.1.1</span> <a id='x1-350007.1.1'></a>The <span class='ec-lmtt-10'>xindy</span> command</h5>
<!-- l. 1006 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><!-- l. 1007 --><br class='noindent' />
<span class='ec-lmbx-10'>encoding</span><br />
<br /></dt>
<dd class='description'><!-- l. 1007 -->
<p class='noindent'>text encoding of the <span class='ec-lmtt-10'>.idx</span> file. Default value is <span class='ec-lmtt-10'>utf8</span>.</p>
</dd>
<dt class='description'><!-- l. 1009 --><br class='noindent' />
<span class='ec-lmbx-10'>language</span><br />
<br /></dt>
<dd class='description'><!-- l. 1009 -->
<p class='noindent'>index language. Default language is English.</p>
</dd>
<dt class='description'><!-- l. 1011 --><br class='noindent' />
<span class='ec-lmbx-10'>modules</span><br />
<br /></dt>
<dd class='description'><!-- l. 1011 -->
<p class='noindent'>table with names of additional <span class='ec-lmtt-10'>Xindy</span> modules to be used.</p>
</dd>
</dl>
<!-- l. 1017 -->
<p class='noindent'><a id='the-makeindex-command'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>7.1.2</span> <a id='x1-360007.1.2'></a>The <span class='ec-lmtt-10'>makeindex</span> command</h5>
<!-- l. 1019 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><!-- l. 1020 --><br class='noindent' />
<span class='ec-lmbx-10'>options</span><br />
<br /></dt>
<dd class='description'><!-- l. 1020 -->
<p class='noindent'>additional command line options for the Makeindex command.</p>
</dd>
</dl>
<!-- l. 1026 -->
<p class='noindent'><a id='the-xindex-command'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>7.1.3</span> <a id='x1-370007.1.3'></a>The <span class='ec-lmtt-10'>xindex</span> command</h5>
<!-- l. 1028 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><!-- l. 1029 --><br class='noindent' />
<span class='ec-lmbx-10'>options</span><br />
<br /></dt>
<dd class='description'><!-- l. 1029 -->
<p class='noindent'>additional command line options for the Xindex command.</p>
</dd>
<dt class='description'><!-- l. 1031 --><br class='noindent' />
<span class='ec-lmbx-10'>language</span><br />
<br /></dt>
<dd class='description'><!-- l. 1031 -->
<p class='noindent'>document language</p>
</dd>
</dl>
<!-- l. 1037 -->
<p class='noindent'><a id='the-tidy-extension'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>7.2</span> <a id='x1-380007.2'></a>The <span class='ec-lmtt-10'>tidy</span> extension</h4>
<!-- l. 1039 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><!-- l. 1040 --><br class='noindent' />
<span class='ec-lmbx-10'>options</span><br />
<br /></dt>
<dd class='description'><!-- l. 1040 -->
<p class='noindent'>command line options for the <span class='ec-lmtt-10'>tidy</span> command. Default value is <span class='ec-lmtt-10'>-m&nbsp;-utf8&nbsp;-w&nbsp;512&nbsp;-q</span>.</p>
</dd>
</dl>
<!-- l. 1047 -->
<p class='noindent'><a id='the-collapsetoc-dom-filter'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>7.3</span> <a id='x1-390007.3'></a>The <span class='ec-lmtt-10'>collapsetoc</span> dom filter</h4>
<!-- l. 1049 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><!-- l. 1050 --><br class='noindent' />
<span class='ec-lmtk-10'>toc_query</span><br />
<br /></dt>
<dd class='description'><!-- l. 1050 -->
<p class='noindent'>CSS selector for selection of element that contains the table of contents.</p>
</dd>
<dt class='description'><!-- l. 1053 --><br class='noindent' />
<span class='ec-lmtk-10'>title_query</span><br />
<br /></dt>
<dd class='description'><!-- l. 1053 -->
<p class='noindent'>CSS selector for selecting all elements that contain the section ID attribute.</p>
</dd>
<dt class='description'><!-- l. 1056 --><br class='noindent' />
<span class='ec-lmtk-10'>toc_levels</span><br />
<br /></dt>
<dd class='description'><!-- l. 1056 -->
<p class='noindent'>table containing a hierarchy of classes used in TOC</p>
</dd>
<dt class='description'><!-- l. 1058 --><br class='noindent' />
<span class='ec-lmtk-10'>max_depth</span><br />
<br /></dt>
<dd class='description'><!-- l. 1058 -->
<p class='noindent'>set detph of displayed children TOC levels</p>
</dd>
</dl>
<!-- l. 1062 -->
<p class='noindent'>Default values:</p>
<pre class='verbatim' id='verbatim-38'>
filter_settings "collapsetoc" {
  toc_query = ".tableofcontents",
  title_query = "h1 a, h2 a, h3 a, h4 a, h5 a, h6 a",
  max_depth = 1,
  toc_levels = {
    tocpart = 1,
    toclikepart = 1,
    tocappendix = 1,
    toclikechapter = 2,
    tocchapter = 2,
    tocsection = 3,
    toclikesection = 3,
    tocsubsection = 4,
    toclikesubsection = 4,
    tocsubsubsection = 5,
    toclikesubsubsection = 5,
    tocparagraph = 6,
    toclikeparagraph = 6,
    tocsubparagraph = 7,
    toclikesubparagraph = 7,
  }
}
</pre>
<!-- l. 1087 -->
<p class='nopar'></p>
<!-- l. 1091 -->
<p class='indent'><a id='the-fixinlines-dom-filter'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>7.4</span> <a id='x1-400007.4'></a>The <span class='ec-lmtt-10'>fixinlines</span> dom filter</h4>
<!-- l. 1093 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><!-- l. 1094 --><br class='noindent' />
<span class='ec-lmbx-10'>inline_elements</span><br />
<br /></dt>
<dd class='description'><!-- l. 1094 -->
<p class='noindent'>table of inline elements that shouldn’t be direct descendants of the <span class='ec-lmtt-10'>body</span> element. The element names should be table keys, the values should be true.</p>
</dd>
</dl>
<!-- l. 1100 -->
<p class='noindent'>Example</p>
<pre class='verbatim' id='verbatim-39'>
filter_settings "fixinlines" {inline_elements = {a = true, b = true}}
</pre>
<!-- l. 1104 -->
<p class='nopar'></p>
<!-- l. 1108 -->
<p class='indent'><a id='the-joincharacters-dom-filter'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>7.5</span> <a id='x1-410007.5'></a>The <span class='ec-lmtt-10'>joincharacters</span> dom filter</h4>
<!-- l. 1110 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><!-- l. 1111 --><br class='noindent' />
<span class='ec-lmbx-10'>charclasses</span><br />
<br /></dt>
<dd class='description'><!-- l. 1111 -->
<p class='noindent'>table of elements that should be concatenated when two or more of such elements with the same value of the <span class='ec-lmtt-10'>class</span> attribute are placed one after another.</p>
</dd>
</dl>
<!-- l. 1117 -->
<p class='noindent'>Example</p>
<pre class='verbatim' id='verbatim-40'>
filter_settings "joincharacters" { charclasses = { span=true, mn = true}}
</pre>
<!-- l. 1121 -->
<p class='nopar'></p>
<!-- l. 1125 -->
<p class='indent'><a id='mathjaxsettings'></a></p>
<h4 class='subsectionHead' id='the-mjcli-filter-and-extension'><span class='titlemark'>7.6</span> <a id='x1-420007.6'></a>The <span class='ec-lmtt-10'>mjcli</span> filter and extension</h4>
<!-- l. 1127 -->
<p class='noindent'><span class='ec-lmtt-10'>mjcli</span> detects whether to use MathML or LaTeX&nbsp;input by use of the <span class='ec-lmtt-10'>mathjax</span> option for <span class='ec-lmtt-10'>make4ht</span>. By default, it uses MathML. LaTeX&nbsp;input can be required using:</p>
<pre class='verbatim' id='verbatim-41'>
make4ht -f html5+mjcli filename.tex "mathjax"
</pre>
<!-- l. 1133 -->
<p class='nopar'></p>
<!-- l. 1136 -->
<p class='indent'><a id='available-settings'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>7.6.1</span> <a id='x1-430007.6.1'></a>Available settings</h5>
<!-- l. 1138 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><!-- l. 1139 --><br class='noindent' />
<span class='ec-lmbx-10'>options</span><br />
<br /></dt>
<dd class='description'><!-- l. 1139 -->
<p class='noindent'>command line options for the <span class='ec-lmtt-10'>mjcli</span> command.</p>
</dd>
</dl>
<!-- l. 1143 -->
<p class='noindent'>Example</p>
<pre class='verbatim' id='verbatim-42'>
filter_settings "mjcli" {
  options="--svg"
}
</pre>
<!-- l. 1149 -->
<p class='nopar'></p>
<!-- l. 1151 -->
<p class='indent'></p>
<dl class='description'>
<dt class='description'><!-- l. 1152 --><br class='noindent' />
<span class='ec-lmbx-10'>cssfilename</span><br />
<br /></dt>
<dd class='description'><!-- l. 1152 -->
<p class='noindent'>the <span class='ec-lmtt-10'>mjcli</span> command puts some CSS code into the HTML pages. The <span class='ec-lmtt-10'>mjcli</span> filter extracts this information and saves it to a standalone CSS file. Default name of this CSS file is <span class='ec-lmtt-10'>${input}-mathjax.css</span></p>
</dd>
<dt class='description'><!-- l. 1157 --><br class='noindent' />
<span class='ec-lmbx-10'>fontdir</span><br />
<br /></dt>
<dd class='description'><!-- l. 1157 -->
<p class='noindent'>directory with MathJax font files. This option enables the use of local fonts, which is useful in the conversion to ePub, for example. The font directory should be sub-directory of the current directory. Only TeX&nbsp;font is supported at the moment.</p>
</dd>
</dl>
<!-- l. 1164 -->
<p class='indent'>Example</p>
<pre class='verbatim' id='verbatim-43'>
filter_settings "mjcli" {
  fontdir="fonts/TeX/woff/"
}
</pre>
<!-- l. 1170 -->
<p class='nopar'></p>
<!-- l. 1174 -->
<p class='indent'><a id='the-staticsite-filter-and-extension'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>7.7</span> <a id='x1-440007.7'></a>The <span class='ec-lmtt-10'>staticsite</span> filter and extension</h4>
<!-- l. 1176 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><!-- l. 1177 --><br class='noindent' />
<span class='ec-lmbx-10'>site_root</span><br />
<br /></dt>
<dd class='description'><!-- l. 1177 -->
<p class='noindent'>directory where generated files should be copied.</p>
</dd>
<dt class='description'><!-- l. 1179 --><br class='noindent' />
<span class='ec-lmbx-10'>map</span><br />
<br /></dt>
<dd class='description'><!-- l. 1179 -->
<p class='noindent'>a hash table where keys contain patterns that match filenames and values contain destination directory for the matched files. The destination directories are relative to the <span class='ec-lmtt-10'>site_root</span> (it is possible to use <span class='ec-lmtt-10'>..</span> to switch to a parent directory).</p>
</dd>
<dt class='description'><!-- l. 1184 --><br class='noindent' />
<span class='ec-lmbx-10'>file_pattern</span><br />
<br /></dt>
<dd class='description'><!-- l. 1184 -->
<p class='noindent'>a pattern used for filename generation. It is possible to use string templates and format strings for <span class='ec-lmtt-10'>os.date</span> function. The default pattern <span class='ec-lmtt-10'>%Y-%m-%d-${input}</span> creates names in the form of <span class='ec-lmtt-10'>YYYY-MM-DD-file_name</span>.</p>
</dd>
<dt class='description'><!-- l. 1189 --><br class='noindent' />
<span class='ec-lmbx-10'>header</span><br />
<br /></dt>
<dd class='description'><!-- l. 1189 -->
<p class='noindent'>table with variables to be set in the YAML header in HTML files. If the table value is a function, it is executed with current parameters and HTML page DOM object as arguments.</p>
</dd>
<dt class='description'><!-- l. 1193 --><br class='noindent' />
<span class='ec-lmbx-10'>remove_maketitle</span><br />
<br /></dt>
<dd class='description'><!-- l. 1193 -->
<p class='noindent'>the <span class='ec-lmtt-10'>staticsite</span> extension removes text produced by the <span class='ec-lmtt-10'>\maketitle</span> command by default. Set this option to <span class='ec-lmtt-10'>false</span> to disable the removal.</p>
</dd>
</dl>
<!-- l. 1199 -->
<p class='noindent'>Example:</p>
<pre class='verbatim' id='verbatim-44'>
-- set the environmental variable ’blog_root’ with path to
-- the directory that should hold the generated HTML files
local outdir = os.getenv "blog_root"
filter_settings "staticsite" {
  site_root = outdir,
  map = {
    [".css$"] = "/css/"
  },
  header = {
     layout="post",
     date = function(parameters, dom)
       return os.date("!%Y-%m-%d %T", parameters.time)
     end
  }
}
</pre>
<!-- l. 1218 -->
<p class='nopar'></p>
<!-- l. 1222 -->
<p class='indent'><a id='the-dvisvgm_hashes-extension'></a></p>
<h4 class='subsectionHead' id='the-dvisvgmhashes-extension'><span class='titlemark'>7.8</span> <a id='x1-450007.8'></a>The <span class='ec-lmtt-10'>dvisvgm_hashes</span> extension</h4>
<!-- l. 1224 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><!-- l. 1225 --><br class='noindent' />
<span class='ec-lmbx-10'>options</span><br />
<br /></dt>
<dd class='description'><!-- l. 1225 -->
<p class='noindent'>command line options for Dvisvgm. The default value is <span class='ec-lmtt-10'>-n&nbsp;--exact&nbsp;-c&nbsp;1.15,1.15</span>.</p>
</dd>
<dt class='description'><!-- l. 1228 --><br class='noindent' />
<span class='ec-lmbx-10'>cpu_cnt</span><br />
<br /></dt>
<dd class='description'><!-- l. 1228 -->
<p class='noindent'>the number of processor cores used for the conversion. The extension tries to detect the available cores automatically by default.</p>
</dd>
<dt class='description'><!-- l. 1231 --><br class='noindent' />
<span class='ec-lmbx-10'>parallel_size</span><br />
<br /></dt>
<dd class='description'><!-- l. 1231 -->
<p class='noindent'>the number of pages used in each Dvisvgm call. The extension detects changed pages in the DVI file and constructs multiple calls to Dvisvgm with only changed pages.</p>
</dd>
<dt class='description'><!-- l. 1235 --><br class='noindent' />
<span class='ec-lmbx-10'>scale</span><br />
<br /></dt>
<dd class='description'><!-- l. 1235 -->
<p class='noindent'>SVG scaling.</p>
</dd>
</dl>
<!-- l. 1241 -->
<p class='noindent'><a id='the-odttemplate-filter-and-extension'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>7.9</span> <a id='x1-460007.9'></a>The <span class='ec-lmtt-10'>odttemplate</span> filter and extension</h4>
<!-- l. 1243 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><!-- l. 1244 --><br class='noindent' />
<span class='ec-lmbx-10'>template</span><br />
<br /></dt>
<dd class='description'><!-- l. 1244 -->
<p class='noindent'>filename of the template <span class='ec-lmtt-10'>ODT</span> file</p>
</dd>
</dl>
<!-- l. 1248 -->
<p class='noindent'><span class='ec-lmtt-10'>odttemplate</span> can also get the template filename from the <span class='ec-lmtt-10'>odttemplate</span> option from <span class='ec-lmtt-10'>tex4ht_sty_par</span> parameter. It can be set using the following command line call:</p>
<pre class='verbatim' id='verbatim-45'>
 make4ht -f odt+odttemplate filename.tex "odttemplate=template.odt"
</pre>
<!-- l. 1254 -->
<p class='nopar'></p>
<!-- l. 1258 -->
<p class='indent'><a id='the-aeneas-filter'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>7.10</span> <a id='x1-470007.10'></a>The <span class='ec-lmtt-10'>aeneas</span> filter</h4>
<!-- l. 1260 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><!-- l. 1261 --><br class='noindent' />
<span class='ec-lmbx-10'>skip_elements</span><br />
<br /></dt>
<dd class='description'><!-- l. 1261 -->
<p class='noindent'>List of CSS selectors that match elements that shouldn’t be processed. Default value: <span class='ec-lmtt-10'>{&nbsp;"math",&nbsp;"svg"}</span>.</p>
</dd>
<dt class='description'><!-- l. 1264 --><br class='noindent' />
<span class='ec-lmbx-10'>id_prefix</span><br />
<br /></dt>
<dd class='description'><!-- l. 1264 -->
<p class='noindent'>prefix used in the ID attribute forming.</p>
</dd>
<dt class='description'><!-- l. 1266 --><br class='noindent' />
<span class='ec-lmbx-10'>sentence_match</span><br />
<br /></dt>
<dd class='description'><!-- l. 1266 -->
<p class='noindent'>Lua pattern used to match a sentence. Default value: <span class='ec-lmtt-10'>"([^%.^%?^!]*)([%.%?!]?)"</span>.</p>
</dd>
</dl>
<!-- l. 1273 -->
<p class='noindent'><a id='the-make4ht-aeneas-config-package'></a></p>
<h4 class='subsectionHead' id='the-makehtaeneasconfig-package'><span class='titlemark'>7.11</span> <a id='x1-480007.11'></a>The <span class='ec-lmtt-10'>make4ht-aeneas-config</span> package</h4>
<!-- l. 1275 -->
<p class='noindent'>Companion for the <span class='ec-lmtt-10'>aeneas</span> DOM filter is the <span class='ec-lmtt-10'>make4ht-aeneas-config</span> plugin. It can be used to write the Aeneas configuration file or execute Aeneas on the generated HTML files.</p>
<!-- l. 1279 -->
<p class='indent'>Available functions:</p>
<!-- l. 1281 -->
<p class='indent'></p>
<dl class='description'>
<dt class='description'><!-- l. 1282 --><br class='noindent' />
<span class='ec-lmbx-10'>write_job(parameters)</span><br />
<br /></dt>
<dd class='description'><!-- l. 1282 -->
<p class='noindent'>write Aenas job configuration to <span class='ec-lmtt-10'>config.xml</span> file. See the <a href='https://www.readbeyond.it/aeneas/docs/clitutorial.html#processing-jobs'>Aeneas documentation</a> for more information about jobs.</p>
</dd>
<dt class='description'><!-- l. 1286 --><br class='noindent' />
<span class='ec-lmbx-10'>execute(parameters)</span><br />
<br /></dt>
<dd class='description'><!-- l. 1286 -->
<p class='noindent'>execute Aeneas.</p>
</dd>
<dt class='description'><!-- l. 1288 --><br class='noindent' />
<span class='ec-lmbx-10'>process_files(parameters)</span><br />
<br /></dt>
<dd class='description'><!-- l. 1288 -->
<p class='noindent'>process the audio and generated subtitle files.</p>
</dd>
</dl>
<!-- l. 1292 -->
<p class='indent'>By default, a <span class='ec-lmtt-10'>SMIL</span> file is created. It is assumed that there is an audio file in the <span class='ec-lmtt-10'>mp3</span> format, named as the TeX&nbsp;file. It is possible to use different formats and filenames using mapping.</p>
<!-- l. 1296 -->
<p class='indent'>The configuration options can be passed directly to the functions or set using <span class='ec-lmtt-10'>filter_settings&nbsp;"aeneas-config"&nbsp;{parameters}</span> function.</p>
<!-- l. 1301 -->
<p class='indent'><a id='available-parameters'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>7.11.1</span> <a id='x1-490007.11.1'></a>Available parameters</h5>
<!-- l. 1303 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><!-- l. 1304 --><br class='noindent' />
<span class='ec-lmbx-10'>lang</span><br />
<br /></dt>
<dd class='description'><!-- l. 1304 -->
<p class='noindent'>document language. It is interfered from the HTML file, so it is not necessary to set it.</p>
</dd>
<dt class='description'><!-- l. 1307 --><br class='noindent' />
<span class='ec-lmbx-10'>map</span><br />
<br /></dt>
<dd class='description'><!-- l. 1307 -->
<p class='noindent'>mapping between HTML, audio and subtitle files. More info below.</p>
</dd>
<dt class='description'><!-- l. 1309 --><br class='noindent' />
<span class='ec-lmbx-10'>text_type</span><br />
<br /></dt>
<dd class='description'><!-- l. 1309 -->
<p class='noindent'>type of input. The <span class='ec-lmtt-10'>aeneas</span> DOM filter produces an <span class='ec-lmtt-10'>unparsed</span> text type.</p>
</dd>
<dt class='description'><!-- l. 1312 --><br class='noindent' />
<span class='ec-lmbx-10'>id_sort</span><br />
<br /></dt>
<dd class='description'><!-- l. 1312 -->
<p class='noindent'>sorting of id attributes. The default value is <span class='ec-lmtt-10'>numeric</span>.</p>
</dd>
<dt class='description'><!-- l. 1314 --><br class='noindent' />
<span class='ec-lmbx-10'>id_regex</span><br />
<br /></dt>
<dd class='description'><!-- l. 1314 -->
<p class='noindent'>regular expression to parse the id attributes.</p>
</dd>
<dt class='description'><!-- l. 1316 --><br class='noindent' />
<span class='ec-lmbx-10'>sub_format</span><br />
<br /></dt>
<dd class='description'><!-- l. 1316 -->
<p class='noindent'>generated subtitle format. The default value is <span class='ec-lmtt-10'>smil</span>.</p>
</dd>
</dl>
<!-- l. 1322 -->
<p class='noindent'><a id='additional-parameters-for-the-job-configuration-file'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>7.11.2</span> <a id='x1-500007.11.2'></a>Additional parameters for the job configuration file</h5>
<ul class='itemize1'>
<li class='itemize'>description</li>
<li class='itemize'>prefix</li>
<li class='itemize'>config_name</li>
<li class='itemize'>keep_config</li>
</ul>
<!-- l. 1336 -->
<p class='noindent'>It is possible to generate multiple HTML files from the LaTeX&nbsp;source. For example, <span class='ec-lmtt-10'>tex4ebook</span> generates a separate file for each chapter or section. It is possible to set options for each HTML file, in particular names of the corresponding audio files. This mapping is done using the <span class='ec-lmtt-10'>map</span> parameter.</p>
<!-- l. 1342 -->
<p class='indent'>Example:</p>
<pre class='verbatim' id='verbatim-46'>
filter_settings "aeneas-config" {
  map = {
    ["sampleli1.html"] = {audio_file="sample.mp3"},
    ["sample.html"] = false
  }
}
</pre>
<!-- l. 1351 -->
<p class='nopar'></p>
<!-- l. 1353 -->
<p class='indent'>Table keys are the configured filenames. It is necessary to insert them as <span class='ec-lmtt-10'>["filename.html"]</span>, because of Lua syntax rules.</p>
<!-- l. 1356 -->
<p class='indent'>This example maps audio file <span class='ec-lmtt-10'>sample.mp3</span> to a section subpage. The main HTML file, which may contain title and table of contents doesn’t have a corresponding audio file.</p>
<!-- l. 1360 -->
<p class='indent'>Filenames of the subfiles correspond to the chapter numbers, so they are not stable when a new chapter is added. It is possible to request filenames derived from the chapter titles using the <span class='ec-lmtt-10'>sec-filename</span> option for <span class='ec-lmtt-10'>tex4ht.sty</span>.</p>
<!-- l. 1367 -->
<p class='indent'><a id='available-map-options'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>7.11.3</span> <a id='x1-510007.11.3'></a>Available <span class='ec-lmtt-10'>map</span> options</h5>
<!-- l. 1369 -->
<p class='noindent'></p>
<dl class='description'>
<dt class='description'><!-- l. 1370 --><br class='noindent' />
<span class='ec-lmbx-10'>audio_file</span><br />
<br /></dt>
<dd class='description'><!-- l. 1370 -->
<p class='noindent'>the corresponding audio file</p>
</dd>
<dt class='description'><!-- l. 1372 --><br class='noindent' />
<span class='ec-lmbx-10'>sub_file</span><br />
<br /></dt>
<dd class='description'><!-- l. 1372 -->
<p class='noindent'>name of the generated subtitle file</p>
</dd>
</dl>
<!-- l. 1376 -->
<p class='noindent'>The following options are the same as their counterparts from the main parameters table and generally, don’t need to be set:</p>
<ul class='itemize1'>
<li class='itemize'>prefix</li>
<li class='itemize'>file_desc</li>
<li class='itemize'>file_id</li>
<li class='itemize'>text_type</li>
<li class='itemize'>id_sort</li>
<li class='itemize'>id_prefix</li>
<li class='itemize'>sub_format</li>
</ul>
<!-- l. 1398 -->
<p class='indent'><a id='full-example'></a></p>
<h5 class='subsubsectionHead'><span class='titlemark'>7.11.4</span> <a id='x1-520007.11.4'></a>Full example</h5>
<pre class='verbatim' id='verbatim-47'>
local domfilter = require "make4ht-domfilter"
local aeneas_config = require "make4ht-aeneas-config"
filter_settings "aeneas-config" {
  map = {
    ["krecekli1.xhtml"] = {audio_file="krecek.mp3"},
    ["krecek.xhtml"] = false
  }
}
local process = domfilter {"aeneas"}
Make:match("html$", process)
if mode == "draft" then
  aeneas_config.process_files {}
else
  aeneas_config.execute {}
end
</pre>
<!-- l. 1419 -->
<p class='nopar'></p>
<!-- l. 1422 -->
<p class='indent'><a id='troubleshooting'></a></p>
<h3 class='sectionHead'><span class='titlemark'>8</span> <a id='x1-530008'></a>Troubleshooting</h3>
<!-- l. 1427 -->
<p class='noindent'><a id='incorrect-handling-of-command-line-arguments-for-tex4ht-t4ht-or-latex'></a></p>
<h4 class='subsectionHead' id='incorrect-handling-of-command-line-arguments-for-texht-tht-or-latex'><span class='titlemark'>8.1</span> <a id='x1-540008.1'></a>Incorrect handling of command line arguments for <span class='ec-lmtt-10'>tex4ht</span>, <span class='ec-lmtt-10'>t4ht</span> or <span class='ec-lmtt-10'>latex</span></h4>
<!-- l. 1429 -->
<p class='noindent'>Sometimes, you may get a similar error:</p>
<pre class='verbatim' id='verbatim-48'>
make4ht:unrecognized parameter: i
</pre>
<!-- l. 1433 -->
<p class='nopar'></p>
<!-- l. 1435 -->
<p class='indent'>It may be caused by a following <span class='ec-lmtt-10'>make4ht</span> invocation:</p>
<pre class='verbatim' id='verbatim-49'>
$ make4ht hello.tex "customcfg,charset=utf-8" "-cunihtf -utf8" -d foo
</pre>
<!-- l. 1439 -->
<p class='nopar'></p>
<!-- l. 1441 -->
<p class='indent'>The command line option parser is confused by mixing options for <span class='ec-lmtt-10'>make4ht</span> and TeX4ht&nbsp;in this case. It tries to interpret the <span class='ec-lmtt-10'>-cunihtf&nbsp;-utf8</span>, which are options for the <span class='ec-lmtt-10'>tex4ht</span> command, as <span class='ec-lmtt-10'>make4ht</span> options. To fix that, try to move the <span class='ec-lmtt-10'>-d&nbsp;foo</span> directly after the <span class='ec-lmtt-10'>make4ht</span> command:</p>
<pre class='verbatim' id='verbatim-50'>
$ make4ht -d foo hello.tex "customcfg,charset=utf-8" "-cunihtf -utf8"
</pre>
<!-- l. 1449 -->
<p class='nopar'></p>
<!-- l. 1451 -->
<p class='indent'>Another option is to add a space before the <span class='ec-lmtt-10'>tex4ht</span> options:</p>
<pre class='verbatim' id='verbatim-51'>
$ make4ht hello.tex "customcfg,charset=utf-8" " -cunihtf -utf8" -d foo
</pre>
<!-- l. 1455 -->
<p class='nopar'></p>
<!-- l. 1457 -->
<p class='indent'>The former way is preferable, though.</p>
<!-- l. 1461 -->
<p class='indent'><a id='table-of-contents-points-to-a-wrong-destination'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>8.2</span> <a id='x1-550008.2'></a>Table of Contents points to a wrong destination</h4>
<!-- l. 1463 -->
<p class='noindent'>The <span class='ec-lmtt-10'>sectionid</span> DOM filter creates better link destinations for sectioning commands. In some cases, for example if you use Pandoc, the document may already contain the link destination with the same name. In such cases the original destination is preserved in the file. In this case links to the section will point to that place, instead of correct destination in the section. This may happen for example if you use Pandoc for the Markdown to
LaTeX&nbsp;conversion. It creates <span class='ec-lmtt-10'>\hypertarget</span> commands that are placed just before section. The links points to that place, instead of the actual section.</p>
<!-- l. 1474 -->
<p class='indent'>In this case you don’t want to update links. Use the <span class='ec-lmtt-10'>notoc</span> option to prevent that.</p>
<!-- l. 1479 -->
<p class='indent'><a id='filenames-containing-spaces'></a></p>
<h4 class='subsectionHead'><span class='titlemark'>8.3</span> <a id='x1-560008.3'></a>Filenames containing spaces</h4>
<!-- l. 1481 -->
<p class='noindent'><span class='ec-lmtt-10'>tex4ht</span> command cannot handle filenames containing spaces. to fix this issue, <span class='ec-lmtt-10'>make4ht</span> replaces spaces in the input filenames with underscores. The generated XML filenames use underscores instead of spaces as well.</p>
<!-- l. 1488 -->
<p class='indent'><a id='filenames-containing-non-ascii-characters'></a></p>
<h4 class='subsectionHead' id='filenames-containing-nonascii-characters'><span class='titlemark'>8.4</span> <a id='x1-570008.4'></a>Filenames containing non-ASCII characters</h4>
<!-- l. 1490 -->
<p class='noindent'>The <span class='ec-lmtt-10'>odt</span> output doesn’t support accented filenames, it is best to stick to ASCII characters in filenames.</p>
<!-- l. 1494 -->
<p class='indent'><a id='license'></a></p>
<h3 class='sectionHead'><span class='titlemark'>9</span> <a id='x1-580009'></a>License</h3>
<!-- l. 1496 -->
<p class='noindent'>Permission is granted to copy, distribute and/or modify this software under the terms of the LaTeX Project Public License, version 1.3.</p>
<!-- l. 2 -->
<p class='indent'><a id='changelog'></a></p>
<h3 class='sectionHead'><span class='titlemark'>10</span> <a id='x1-5900010'></a>Changelog</h3>
<ul class='itemize1'>
<li class='itemize'><!-- l. 6 -->
<p class='noindent'>2021/12/06</p>
<ul class='itemize2'>
<li class='itemize'>in the end, use <span class='ec-lmtt-10'>&lt;mtext&gt;</span> even for one <span class='ec-lmtt-10'>&lt;mo&gt;</span> in the <span class='ec-lmtt-10'>fix_operators</span> function. LO had issues with <span class='ec-lmtt-10'>&lt;mi&gt;</span>.</li>
</ul>
</li>
<li class='itemize'><!-- l. 16 -->
<p class='noindent'>2021/12/03</p>
<ul class='itemize2'>
<li class='itemize'>don’t add additional <span class='ec-lmtt-10'>&lt;mrow&gt;</span> elements in the <span class='ec-lmtt-10'>mathmlfixes</span> DOM filter. It caused various issues.</li>
</ul>
</li>
<li class='itemize'><!-- l. 25 -->
<p class='noindent'>2021/12/01</p>
<ul class='itemize2'>
<li class='itemize'>transform <span class='ec-lmtt-10'>&lt;mn&gt;x&lt;/mn&gt;&lt;mo&gt;.&lt;/mo&gt;&lt;mn&gt;x&lt;/mn&gt;</span> to <span class='ec-lmtt-10'>&lt;mn&gt;x.x&lt;/mn&gt;</span> in MathML.</li>
<li class='itemize'>transform <span class='ec-lmtt-10'>&lt;mo&gt;</span> elements that are single childs to <span class='ec-lmtt-10'>&lt;mi&gt;</span> in MathML, and list of consecutive <span class='ec-lmtt-10'>&lt;mo&gt;</span> elements to <span class='ec-lmtt-10'>&lt;mtext&gt;</span>. This should fix rendering issues of superscripts in LibreOffice.</li>
<li class='itemize'>added filter names in extensions to prevent multiple execution of filters.</li>
</ul>
</li>
<li class='itemize'><!-- l. 46 -->
<p class='noindent'>2021/11/29</p>
<ul class='itemize2'>
<li class='itemize'>make current logging level available outside of the Logging module.</li>
<li class='itemize'>print Xtpipes and Tidy output if these command fail in the Xtpipes module.</li>
</ul>
</li>
<li class='itemize'><!-- l. 57 -->
<p class='noindent'>2021/11/18</p>
<ul class='itemize2'>
<li class='itemize'>don’t put <span class='ec-lmtt-10'>&lt;mrow&gt;</span> as children of <span class='ec-lmtt-10'>&lt;mrow&gt;</span> in the <span class='ec-lmtt-10'>mathmlfixes</span> DOM filter.</li>
</ul>
</li>
<li class='itemize'><!-- l. 67 -->
<p class='noindent'>2021/11/04</p>
<ul class='itemize2'>
<li class='itemize'>more intelligent handling of text and inline elements outside of paragraphs in the <span class='ec-lmtt-10'>fixinlines</span> DOM filter.</li>
</ul>
</li>
<li class='itemize'><!-- l. 76 -->
<p class='noindent'>2021/10/11</p>
<ul class='itemize2'>
<li class='itemize'>version <span class='ec-lmtt-10'>0.3j</span> released.</li>
</ul>
</li>
<li class='itemize'><!-- l. 84 -->
<p class='noindent'>2021/10/09</p>
<ul class='itemize2'>
<li class='itemize'>fixed wrong DOM object name in the ODT format.</li>
<li class='itemize'>add addtional <span class='ec-lmtt-10'>&lt;mrow&gt;</span> elements when necessary.</li>
</ul>
</li>
<li class='itemize'><!-- l. 95 -->
<p class='noindent'>2021/09/30</p>
<ul class='itemize2'>
<li class='itemize'>version <span class='ec-lmtt-10'>0.3i</span> released.</li>
</ul>
</li>
<li class='itemize'><!-- l. 103 -->
<p class='noindent'>2021/09/21</p>
<ul class='itemize2'>
<li class='itemize'>run DOM parse in sandbox in the ODT format picture size function.</li>
</ul>
</li>
<li class='itemize'><!-- l. 111 -->
<p class='noindent'>2021/09/20</p>
<ul class='itemize2'>
<li class='itemize'>remove LaTeX commands from TOC entries in <span class='ec-lmtt-10'>sectionid</span> DOM filter.</li>
</ul>
</li>
<li class='itemize'><!-- l. 120 -->
<p class='noindent'>2021/09/09</p>
<ul class='itemize2'>
<li class='itemize'>corrected SVG dimension setting in the ODT output. Dimensions are set also for PNG and JPG pictures.</li>
</ul>
</li>
<li class='itemize'><!-- l. 129 -->
<p class='noindent'>2021/09/05</p>
<ul class='itemize2'>
<li class='itemize'>corrected detection of closing brace in CSS style in <span class='ec-lmtt-10'>mjcli</span> filter.</li>
</ul>
</li>
<li class='itemize'><!-- l. 138 -->
<p class='noindent'>2021/08/13</p>
<ul class='itemize2'>
<li class='itemize'>use LaTeX new hook mechanism to load <span class='ec-lmtt-10'>tex4ht.sty</span> before document class. It fixes some issues with packages required in classes.</li>
</ul>
</li>
<li class='itemize'><!-- l. 148 -->
<p class='noindent'>2021/08/12</p>
<ul class='itemize2'>
<li class='itemize'>correctly set dimensions for <span class='ec-lmtt-10'>SVG</span> images in the <span class='ec-lmtt-10'>ODT</span> format.</li>
</ul>
</li>
<li class='itemize'><!-- l. 157 -->
<p class='noindent'>2021/07/29</p>
<ul class='itemize2'>
<li class='itemize'>sort YAML header in the <span class='ec-lmtt-10'>staticsite</span> filter.</li>
</ul>
</li>
<li class='itemize'><!-- l. 165 -->
<p class='noindent'>2021/07/25</p>
<ul class='itemize2'>
<li class='itemize'>version <span class='ec-lmtt-10'>0.3h</span> released.</li>
</ul>
</li>
<li class='itemize'><!-- l. 173 -->
<p class='noindent'>2021/07/25</p>
<ul class='itemize2'>
<li class='itemize'>use current directory as default output dir in <span class='ec-lmtt-10'>staticsite</span> extension.</li>
</ul>
</li>
<li class='itemize'><!-- l. 182 -->
<p class='noindent'>2021/07/23</p>
<ul class='itemize2'>
<li class='itemize'>fixed detection of single paragraphs inside <span class='ec-lmtt-10'>&lt;li&gt;</span> in the <span class='ec-lmtt-10'>itemparagraphs</span> DOM filter.</li>
</ul>
</li>
<li class='itemize'><!-- l. 192 -->
<p class='noindent'>2021/07/18</p>
<ul class='itemize2'>
<li class='itemize'>remove elements produced by <span class='ec-lmtt-10'>\maketitle</span> in the <span class='ec-lmtt-10'>staticsite</span> extension.</li>
</ul>
</li>
<li class='itemize'><!-- l. 201 -->
<p class='noindent'>2021/07/05</p>
<ul class='itemize2'>
<li class='itemize'>sort colors alphabetically in the <span class='ec-lmtt-10'>joincolors</span> DOM filter to enable reproducible builds.</li>
</ul>
</li>
<li class='itemize'><!-- l. 210 -->
<p class='noindent'>2021/06/26</p>
<ul class='itemize2'>
<li class='itemize'>rewrote the <span class='ec-lmtt-10'>collapsetoc</span> DOM filter.</li>
</ul>
</li>
<li class='itemize'><!-- l. 218 -->
<p class='noindent'>2021/06/20</p>
<ul class='itemize2'>
<li class='itemize'>test for the <span class='ec-lmtt-10'>svg</span> picture mode in the <span class='ec-lmtt-10'>tex4ht</span> command. Use the <span class='ec-lmtt-10'>-g.svg</span> option if it is detected. This is necessary for correct support of pictorial characters.</li>
</ul>
</li>
<li class='itemize'><!-- l. 228 -->
<p class='noindent'>2021/06/16</p>
<ul class='itemize2'>
<li class='itemize'>better handling of duplicate ID attributes in <span class='ec-lmtt-10'>sectionid</span> DOM filter.</li>
<li class='itemize'>support <span class='ec-lmtt-10'>notoc</span> option in <span class='ec-lmtt-10'>sectionid</span>.</li>
</ul>
</li>
<li class='itemize'><!-- l. 239 -->
<p class='noindent'>2021/06/13</p>
<ul class='itemize2'>
<li class='itemize'>added <span class='ec-lmtt-10'>itemparagraphs</span> DOM filter. It removes unnecessary paragraphs from <span class='ec-lmtt-10'>&lt;li&gt;</span> elements.</li>
</ul>
</li>
<li class='itemize'><!-- l. 248 -->
<p class='noindent'>2021/05/06</p>
<ul class='itemize2'>
<li class='itemize'>remove <span class='ec-lmtt-10'>&lt;hr&gt;</span> elements in <span class='ec-lmtt-10'>.hline</span> rows in <span class='ec-lmtt-10'>tablerows</span> DOM filter.</li>
</ul>
</li>
<li class='itemize'><!-- l. 257 -->
<p class='noindent'>2021/05/01</p>
<ul class='itemize2'>
<li class='itemize'>added function <span class='ec-lmtt-10'>mkutils.isModuleAvailable</span>. It checks if Lua library is available.</li>
<li class='itemize'>check for <span class='ec-lmtt-10'>char-def</span> library in <span class='ec-lmtt-10'>sectionid</span> DOM filter.</li>
</ul>
</li>
<li class='itemize'><!-- l. 269 -->
<p class='noindent'>2021/04/08</p>
<ul class='itemize2'>
<li class='itemize'>removed <span class='ec-lmtt-10'>build_changed</span>. New script, <a href='https://github.com/michal-h21/siterebuild'>siterebuild</a>, should be used instead.</li>
<li class='itemize'>new DOM filter, <span class='ec-lmtt-10'>sectionid</span>. It uses sanitized titles instead of automatically generated numbers as section IDs.</li>
<li class='itemize'>added <span class='ec-lmtt-10'>sectionid</span> to <span class='ec-lmtt-10'>common_domfilters</span>.</li>
<li class='itemize'>use <span class='ec-lmtt-10'>context</span> in the Docker file, because it contains the <span class='ec-lmtt-10'>char-def.lua</span> file.</li>
</ul>
</li>
<li class='itemize'><!-- l. 287 -->
<p class='noindent'>2021/03/20</p>
<ul class='itemize2'>
<li class='itemize'>use <span class='ec-lmtt-10'>kpse</span> library when files are copied to the output directory.</li>
<li class='itemize'>added <span class='ec-lmtt-10'>clean</span> mode. It removes all generated, temporary and auxilary files.</li>
</ul>
</li>
<li class='itemize'><!-- l. 299 -->
<p class='noindent'>2021/03/19</p>
<ul class='itemize2'>
<li class='itemize'>version <span class='ec-lmtt-10'>0.3g</span> released.</li>
</ul>
</li>
<li class='itemize'><!-- l. 307 -->
<p class='noindent'>2021/02/08</p>
<ul class='itemize2'>
<li class='itemize'>remove <span class='ec-lmtt-10'>&lt;?xtpipes&nbsp;?&gt;</span> processing instructions from the generated ODT file.</li>
</ul>
</li>
<li class='itemize'><!-- l. 316 -->
<p class='noindent'>2021/02/01</p>
<ul class='itemize2'>
<li class='itemize'>better error messages when extension cannot be loaded.</li>
<li class='itemize'>added <span class='ec-lmtt-10'>mjcli</span> extension.</li>
<li class='itemize'><span class='ec-lmtt-10'>mjcli</span> filter supports LaTeX&nbsp;syntax.</li>
<li class='itemize'>updated documentation.</li>
</ul>
</li>
<li class='itemize'><!-- l. 330 -->
<p class='noindent'>2021/01/31</p>
<ul class='itemize2'>
<li class='itemize'>added new MathJax Node filter, <span class='ec-lmtt-10'>mjcli</span>.</li>
</ul>
</li>
<li class='itemize'><!-- l. 338 -->
<p class='noindent'>2020/12/19</p>
<ul class='itemize2'>
<li class='itemize'>build web documentation only when documentation sources change.</li>
</ul>
</li>
<li class='itemize'><!-- l. 346 -->
<p class='noindent'>2020/11/22</p>
<ul class='itemize2'>
<li class='itemize'>set exit status for the <span class='ec-lmtt-10'>make4ht</span> command.</li>
</ul>
</li>
<li class='itemize'><!-- l. 354 -->
<p class='noindent'>2020/11/22</p>
<ul class='itemize2'>
<li class='itemize'>new extension, <span class='ec-lmtt-10'>build_changed</span>.</li>
</ul>
</li>
<li class='itemize'><!-- l. 362 -->
<p class='noindent'>2020/11/01</p>
<ul class='itemize2'>
<li class='itemize'>fix deprecated <span class='ec-lmtt-10'>&lt;mfenced&gt;</span> element in MathML</li>
<li class='itemize'>convert <span class='ec-lmtt-10'>&lt;mo&nbsp;fence&gt;</span> elements to <span class='ec-lmtt-10'>&lt;mfenced&gt;</span> in <span class='ec-lmtt-10'>ODT</span> format.</li>
</ul>
</li>
<li class='itemize'><!-- l. 374 -->
<p class='noindent'>2020/10/28</p>
<ul class='itemize2'>
<li class='itemize'>fixed handling of nested <span class='ec-lmtt-10'>&lt;span&gt;</span> elements in <span class='ec-lmtt-10'>joincharacters</span> DOM filter.</li>
</ul>
</li>
<li class='itemize'><!-- l. 383 -->
<p class='noindent'>2020/10/25</p>
<ul class='itemize2'>
<li class='itemize'>fixed command name for <span class='ec-lmtt-10'>Make:httex</span>, it was <span class='ec-lmtt-10'>Make:htttex</span>.</li>
</ul>
</li>
<li class='itemize'><!-- l. 392 -->
<p class='noindent'>2020/10/17</p>
<ul class='itemize2'>
<li class='itemize'>generate YAML header for all generated files with the <span class='ec-lmtt-10'>staticsite</span> extension.</li>
</ul>
</li>
<li class='itemize'><!-- l. 401 -->
<p class='noindent'>2020/09/17</p>
<ul class='itemize2'>
<li class='itemize'>require <span class='ec-lmtt-10'>mathml</span> option when <span class='ec-lmtt-10'>mathjaxnode</span> extension is used.</li>
</ul>
</li>
<li class='itemize'><!-- l. 410 -->
<p class='noindent'>2020/09/07</p>
<ul class='itemize2'>
<li class='itemize'>version <span class='ec-lmtt-10'>0.3f</span> released.</li>
</ul>
</li>
<li class='itemize'><!-- l. 418 -->
<p class='noindent'>2020/08/26</p>
<ul class='itemize2'>
<li class='itemize'><span class='ec-lmtt-10'>fixinlines</span> DOM filter: added <span class='ec-lmtt-10'>&lt;a&gt;</span> element into list of inline elements.</li>
</ul>
</li>
<li class='itemize'><!-- l. 428 -->
<p class='noindent'>2020/08/24</p>
<ul class='itemize2'>
<li class='itemize'>initialize attributes in new element in <span class='ec-lmtt-10'>mathmlfixes</span> DOM extension.</li>
</ul>
</li>
<li class='itemize'><!-- l. 437 -->
<p class='noindent'>2020/07/18</p>
<ul class='itemize2'>
<li class='itemize'>changed CSS for the HTML documentation.</li>
</ul>
</li>
<li class='itemize'><!-- l. 445 -->
<p class='noindent'>2020/07/17</p>
<ul class='itemize2'>
<li class='itemize'>fixed bug in index parsing.</li>
</ul>
</li>
<li class='itemize'><!-- l. 453 -->
<p class='noindent'>2020/07/10</p>
<ul class='itemize2'>
<li class='itemize'>use the <span class='ec-lmtt-10'>joincharacters</span> DOM filter for TEI output.</li>
</ul>
</li>
<li class='itemize'><!-- l. 461 -->
<p class='noindent'>2020/07/08</p>
<ul class='itemize2'>
<li class='itemize'>don’t fail when filename cannot be detected in <span class='ec-lmtt-10'>make4ht-errorlogparser.lua</span>.</li>
</ul>
</li>
<li class='itemize'><!-- l. 470 -->
<p class='noindent'>2020/05/27</p>
<ul class='itemize2'>
<li class='itemize'>test if copied file exists in <span class='ec-lmtt-10'>mkutils.cp</span>.</li>
</ul>
</li>
<li class='itemize'><!-- l. 478 -->
<p class='noindent'>2020/05/19</p>
<ul class='itemize2'>
<li class='itemize'>fixed image filename replace in <span class='ec-lmtt-10'>dvisvgm_hashes</span> extension.</li>
</ul>
</li>
<li class='itemize'><!-- l. 486 -->
<p class='noindent'>2020/05/16</p>
<ul class='itemize2'>
<li class='itemize'>fixed HTML filename matching in extensions.</li>
</ul>
</li>
<li class='itemize'><!-- l. 494 -->
<p class='noindent'>2020/05/08</p>
<ul class='itemize2'>
<li class='itemize'>use global environment in the build files.</li>
</ul>
</li>
<li class='itemize'><!-- l. 502 -->
<p class='noindent'>2020/03/03</p>
<ul class='itemize2'>
<li class='itemize'>added <span class='ec-lmtt-10'>jats</span> format.</li>
</ul>
</li>
<li class='itemize'><!-- l. 510 -->
<p class='noindent'>2020/02/28</p>
<ul class='itemize2'>
<li class='itemize'>version <span class='ec-lmtt-10'>0.3e&nbsp;released</span>.</li>
</ul>
</li>
<li class='itemize'><!-- l. 518 -->
<p class='noindent'>2020/02/24</p>
<ul class='itemize2'>
<li class='itemize'><span class='ec-lmtt-10'>t4htlinks</span> DOM filter: cleanup file names from internal links.</li>
<li class='itemize'><span class='ec-lmtt-10'>make4ht-indexing</span>: added support for splitindex.</li>
</ul>
</li>
<li class='itemize'><!-- l. 529 -->
<p class='noindent'>2020/02/19</p>
<ul class='itemize2'>
<li class='itemize'>use <span class='ec-lmtt-10'>UTF-8</span> output by default. <span class='ec-lmtt-10'>8-bit</span> output is broken and non fixable.</li>
</ul>
</li>
<li class='itemize'><!-- l. 538 -->
<p class='noindent'>2020/02/07</p>
<ul class='itemize2'>
<li class='itemize'>use <span class='ec-lmtt-10'>lualatex-dev</span> instead of <span class='ec-lmtt-10'>harflatex</span></li>
</ul>
</li>
<li class='itemize'><!-- l. 546 -->
<p class='noindent'>2020/02/06</p>
<ul class='itemize2'>
<li class='itemize'>added support for <span class='ec-lmtt-10'>harflatex</span> and <span class='ec-lmtt-10'>harftex</span> in the <span class='ec-lmtt-10'>detect_engine</span> extension.</li>
</ul>
</li>
<li class='itemize'><!-- l. 555 -->
<p class='noindent'>2020/01/22</p>
<ul class='itemize2'>
<li class='itemize'>version <span class='ec-lmtt-10'>0.3d</span> released.</li>
<li class='itemize'>added <span class='ec-lmtt-10'>Make:httex</span> command for Plain TeX support.</li>
<li class='itemize'>added <span class='ec-lmtt-10'>detect_engine</span> extension. It supports detection of the used engine and format from TeX Shop or TeXWorks magic comments. These comments can look like: <span class='ec-lmtt-10'>%!TEX&nbsp;TS-program&nbsp;=&nbsp;xelatex</span>.</li>
</ul>
</li>
<li class='itemize'><!-- l. 570 -->
<p class='noindent'>2020/01/22</p>
<ul class='itemize2'>
<li class='itemize'>fixed support for multiple indices in <span class='ec-lmtt-10'>make4ht-indexing.lua</span>.</li>
</ul>
</li>
<li class='itemize'><!-- l. 578 -->
<p class='noindent'>2019/12/29</p>
<ul class='itemize2'>
<li class='itemize'>use the <span class='ec-lmtt-10'>mathvariant="italic"</span> attribute for joined <span class='ec-lmtt-10'>&lt;mi&gt;</span> elements.</li>
<li class='itemize'>fixed comparison of element attributes in <span class='ec-lmtt-10'>joincharacters</span> DOM filter.</li>
</ul>
</li>
<li class='itemize'><!-- l. 590 -->
<p class='noindent'>2019/12/28</p>
<ul class='itemize2'>
<li class='itemize'>print warning if the input file doesn’t exist.</li>
</ul>
</li>
<li class='itemize'><!-- l. 598 -->
<p class='noindent'>2019/12/17</p>
<ul class='itemize2'>
<li class='itemize'>added <span class='ec-lmtt-10'>booktabs</span> DOM filter.</li>
<li class='itemize'>load the <span class='ec-lmtt-10'>booktabs</span> in <span class='ec-lmtt-10'>common_domfilters</span> by default.</li>
</ul>
</li>
<li class='itemize'><!-- l. 609 -->
<p class='noindent'>2019/12/14</p>
<ul class='itemize2'>
<li class='itemize'>fixed bug in the <span class='ec-lmtt-10'>tablerows</span> DOM filter – it could remove table rows if they contained only one column with elements that contained no text content.</li>
</ul>
</li>
<li class='itemize'><!-- l. 619 -->
<p class='noindent'>2019/11/28</p>
<ul class='itemize2'>
<li class='itemize'>version <span class='ec-lmtt-10'>0.3c</span> released.</li>
<li class='itemize'>updated <span class='ec-lmtt-10'>mathmlfixes</span> DOM filter. It handles <span class='ec-lmtt-10'>&lt;mstyle&gt;</span> element inside token elements now.</li>
<li class='itemize'>use <span class='ec-lmtt-10'>mathmlfixes</span> and <span class='ec-lmtt-10'>joincharacters</span> DOM filters for math XML files in the ODT output.</li>
</ul>
</li>
<li class='itemize'><!-- l. 634 -->
<p class='noindent'>2019/11/25</p>
<ul class='itemize2'>
<li class='itemize'>added <span class='ec-lmtt-10'>pythontex</span> command.</li>
<li class='itemize'>added <span class='ec-lmtt-10'>mathmlfixes</span> DOM filter.</li>
<li class='itemize'>use the <span class='ec-lmtt-10'>mathmlfixes</span> DOM filter in <span class='ec-lmtt-10'>common_domfilters</span> extension.</li>
</ul>
</li>
<li class='itemize'><!-- l. 647 -->
<p class='noindent'>2019/11/22</p>
<ul class='itemize2'>
<li class='itemize'><span class='ec-lmtt-10'>make4ht-joincharacters</span> dom filter: added support for the <span class='ec-lmtt-10'>&lt;mi&gt;</span> element. Test all attributes for match when joining characters.</li>
<li class='itemize'><span class='ec-lmtt-10'>html5</span> format: use the <span class='ec-lmtt-10'>common_domfilters</span> by default.</li>
</ul>
</li>
<li class='itemize'><!-- l. 660 -->
<p class='noindent'>2019/11/03</p>
<ul class='itemize2'>
<li class='itemize'>version <span class='ec-lmtt-10'>0.3b</span></li>
<li class='itemize'>use <span class='ec-lmtt-10'>make4ht-ext-</span> prefix for extensions to prevent filename clashes with corresponding filters.</li>
</ul>
</li>
<li class='itemize'><!-- l. 671 -->
<p class='noindent'>2019/11/01</p>
<ul class='itemize2'>
<li class='itemize'>version <span class='ec-lmtt-10'>0.3a</span> released.</li>
<li class='itemize'>added <span class='ec-lmtt-10'>make4ht-</span> prefix to all extensions and formats</li>
<li class='itemize'>removed the unused <span class='ec-lmtt-10'>mathjaxnode.lua</span> file.</li>
</ul>
</li>
<li class='itemize'><!-- l. 683 -->
<p class='noindent'>2019/11/01</p>
<ul class='itemize2'>
<li class='itemize'>version <span class='ec-lmtt-10'>0.3</span> released.</li>
<li class='itemize'>added <span class='ec-lmtt-10'>Make:makeindex</span>, <span class='ec-lmtt-10'>Make:xindex</span> and <span class='ec-lmtt-10'>Make:bibtex</span> commands.</li>
</ul>
</li>
<li class='itemize'><!-- l. 694 -->
<p class='noindent'>2019/10/25</p>
<ul class='itemize2'>
<li class='itemize'>modified the <span class='ec-lmtt-10'>Make:xindy</span> command to use the indexing mechanism.</li>
</ul>
</li>
<li class='itemize'><!-- l. 703 -->
<p class='noindent'>2019/10/24</p>
<ul class='itemize2'>
<li class='itemize'>added functions for preparing and cleaning of the index files in <span class='ec-lmtt-10'>make4ht-indexing.lua</span>.</li>
</ul>
</li>
<li class='itemize'><!-- l. 712 -->
<p class='noindent'>2019/10/23</p>
<ul class='itemize2'>
<li class='itemize'>replaced <span class='ec-lmtt-10'>os.execute</span> function with <span class='ec-lmtt-10'>mkutils.execute</span>. It uses the logging mechanism for the output.</li>
<li class='itemize'>finished transforming of filters, extensions and formats to the logging system.</li>
</ul>
</li>
<li class='itemize'><!-- l. 724 -->
<p class='noindent'>2019/10/22</p>
<ul class='itemize2'>
<li class='itemize'>added <span class='ec-lmtt-10'>tablerows</span> domfilter.</li>
<li class='itemize'>added the <span class='ec-lmtt-10'>tablerows</span> domfilter to the <span class='ec-lmtt-10'>common_domfilters</span> extension.</li>
<li class='itemize'>converted most of the filters to use the logging mechanism.</li>
</ul>
</li>
<li class='itemize'><!-- l. 737 -->
<p class='noindent'>2019/10/20</p>
<ul class='itemize2'>
<li class='itemize'>added <span class='ec-lmtt-10'>status</span> log level.</li>
</ul>
</li>
<li class='itemize'><!-- l. 745 -->
<p class='noindent'>2019/10/18</p>
<ul class='itemize2'>
<li class='itemize'>converted most print commands to use the logging mechanism.</li>
<li class='itemize'>added <span class='ec-lmtt-10'>output</span> log level used for printing of the commands output.</li>
</ul>
</li>
<li class='itemize'><!-- l. 756 -->
<p class='noindent'>2019/10/17</p>
<ul class='itemize2'>
<li class='itemize'>added <span class='ec-lmtt-10'>--loglevel</span> CLI parameter.</li>
<li class='itemize'>added logging mechanism.</li>
<li class='itemize'>moved <span class='ec-lmtt-10'>htlatex</span> related code to <span class='ec-lmtt-10'>make4ht-htlatex.lua</span> from <span class='ec-lmtt-10'>mkutils.lua</span></li>
</ul>
</li>
<li class='itemize'><!-- l. 769 -->
<p class='noindent'>2019/10/11</p>
<ul class='itemize2'>
<li class='itemize'>added <span class='ec-lmtt-10'>xindy</span> settings.</li>
<li class='itemize'>added simple regular expression to detect errors in the log file, because log parsing can be slow.</li>
</ul>
</li>
<li class='itemize'><!-- l. 780 -->
<p class='noindent'>2019/10/09</p>
<ul class='itemize2'>
<li class='itemize'>added the <span class='ec-lmtt-10'>interaction</span> parameter for the <span class='ec-lmtt-10'>htlatex</span> command. The default value is <span class='ec-lmtt-10'>batchmode</span> to suppress the user input on errors, and to suppress full log output to the terminal.</li>
<li class='itemize'>added the <span class='ec-lmtt-10'>make4ht-errorlogparser</span> module. It is used to parse errors in the <span class='ec-lmtt-10'>htlatex</span> run unless <span class='ec-lmtt-10'>interaction</span> is set to <span class='ec-lmtt-10'>errorstopmode</span>.</li>
</ul>
</li>
<li class='itemize'><!-- l. 795 -->
<p class='noindent'>2019/10/08</p>
<ul class='itemize2'>
<li class='itemize'>set up Github Actions pipeline to compile the documentation to HTML and publish it at https://www.kodymirus.cz/make4ht/make4ht-doc.html.</li>
</ul>
</li>
<li class='itemize'><!-- l. 804 -->
<p class='noindent'>2019/10/07</p>
<ul class='itemize2'>
<li class='itemize'>don’t move the <span class='ec-lmtt-10'>common_domfilters</span> extension to the first place in the file matches pipeline. We may want to run <span class='ec-lmtt-10'>tidy</span> or regex filters first, to fix XML validation errors.</li>
</ul>
</li>
<li class='itemize'><!-- l. 814 -->
<p class='noindent'>2019/10/04</p>
<ul class='itemize2'>
<li class='itemize'>added HTML documentation.</li>
</ul>
</li>
<li class='itemize'><!-- l. 822 -->
<p class='noindent'>2019/09/27</p>
<ul class='itemize2'>
<li class='itemize'>don’t convert Latin 1 entities to Unicode in the <span class='ec-lmtt-10'>entities_to_unicode</span> extension.</li>
</ul>
</li>
<li class='itemize'><!-- l. 831 -->
<p class='noindent'>2019/09/20</p>
<ul class='itemize2'>
<li class='itemize'>fixed bugs in the temporary directory handling for the ODT output.</li>
</ul>
</li>
<li class='itemize'><!-- l. 839 -->
<p class='noindent'>2019/09/13</p>
<ul class='itemize2'>
<li class='itemize'>added <span class='ec-lmtt-10'>preprocess_input</span> extension. It enables compilation of formats supported by <a href='https://yihui.name/knitr/'>Knitr</a> (<span class='ec-lmtt-10'>.Rnw</span>, <span class='ec-lmtt-10'>.Rtex</span>, <span class='ec-lmtt-10'>.Rmd</span>, <span class='ec-lmtt-10'>.Rrst</span>) and also Markdown and reStructuredText formats.</li>
</ul>
</li>
<li class='itemize'><!-- l. 850 -->
<p class='noindent'>2019/09/12</p>
<ul class='itemize2'>
<li class='itemize'>added support for the ODT files in <span class='ec-lmtt-10'>common_domfilters</span> extension.</li>
<li class='itemize'>renamed <span class='ec-lmtt-10'>charclases</span> option for the <span class='ec-lmtt-10'>joincharacters</span> DOM filter to <span class='ec-lmtt-10'>charclasses</span>.</li>
<li class='itemize'>don’t execute the <span class='ec-lmtt-10'>fixentities</span> filter before Xtpipes, it makes no sense.</li>
</ul>
</li>
<li class='itemize'><!-- l. 865 -->
<p class='noindent'>2019/09/11</p>
<ul class='itemize2'>
<li class='itemize'>added support for Biber in the build files.</li>
</ul>
</li>
<li class='itemize'><!-- l. 873 -->
<p class='noindent'>2019/08/28</p>
<ul class='itemize2'>
<li class='itemize'>added support for input from <span class='ec-lmtt-10'>stdin</span>.</li>
</ul>
</li>
<li class='itemize'><!-- l. 881 -->
<p class='noindent'>2019/08/27</p>
<ul class='itemize2'>
<li class='itemize'>fixed <span class='ec-lmtt-10'>-jobname</span> detection regex.</li>
<li class='itemize'>added function <span class='ec-lmtt-10'>handle_jobname</span>.</li>
<li class='itemize'>added the <span class='ec-lmtt-10'>--jobname</span> command line option.</li>
</ul>
</li>
<li class='itemize'><!-- l. 893 -->
<p class='noindent'>2019/08/26</p>
<ul class='itemize2'>
<li class='itemize'>quote file names and paths in <span class='ec-lmtt-10'>xtpipes</span> and <span class='ec-lmtt-10'>tidy</span> invocation.</li>
</ul>
</li>
<li class='itemize'><!-- l. 902 -->
<p class='noindent'>2019/08/25</p>
<ul class='itemize2'>
<li class='itemize'>the issue tracker link in the help message is now configurable.</li>
<li class='itemize'>fixed bug in the XeTeX handling: the <span class='ec-lmtt-10'>.xdv</span> argument for <span class='ec-lmtt-10'>tex4ht</span> wasn’t used if command line arguments for <span class='ec-lmtt-10'>tex4ht</span> were present.</li>
</ul>
</li>
<li class='itemize'><!-- l. 914 -->
<p class='noindent'>2019/07/03</p>
<ul class='itemize2'>
<li class='itemize'>new DOM filter: <span class='ec-lmtt-10'>odtpartable</span>. It fixes tables nested in paragraphs in the ODT format.</li>
</ul>
</li>
<li class='itemize'><!-- l. 923 -->
<p class='noindent'>2019/06/13</p>
<ul class='itemize2'>
<li class='itemize'>new DOM extension: <span class='ec-lmtt-10'>collapsetoc</span>.</li>
</ul>
</li>
<li class='itemize'><!-- l. 931 -->
<p class='noindent'>2019/05/29</p>
<ul class='itemize2'>
<li class='itemize'>new module: <span class='ec-lmtt-10'>make4ht-indexing</span> for working with index files.</li>
</ul>
</li>
<li class='itemize'><!-- l. 939 -->
<p class='noindent'>2019/05/24</p>
<ul class='itemize2'>
<li class='itemize'>version 0.2g released</li>
<li class='itemize'>fixed failing <span class='ec-lmtt-10'>dvisvgm_hashes</span> extension on Windows.</li>
</ul>
</li>
<li class='itemize'><!-- l. 949 -->
<p class='noindent'>2019/05/02</p>
<ul class='itemize2'>
<li class='itemize'>fixed infinite loop bug in the <span class='ec-lmtt-10'>dvisvgm_hashes</span> extension.</li>
</ul>
</li>
<li class='itemize'><!-- l. 957 -->
<p class='noindent'>2019/04/09</p>
<ul class='itemize2'>
<li class='itemize'><span class='ec-lmtt-10'>make4ht-joincolors</span> fix: remove the hash character from the color name. This caused issues with colors specified in the hexadecimal format.</li>
</ul>
</li>
<li class='itemize'><!-- l. 967 -->
<p class='noindent'>2019/04/02</p>
<ul class='itemize2'>
<li class='itemize'><span class='ec-lmtt-10'>dvisvgm_hashes</span> fix: update also the lgfile.images table with generated filenames, in order to support tex4ebook</li>
</ul>
</li>
<li class='itemize'><!-- l. 976 -->
<p class='noindent'>2019/04/01</p>
<ul class='itemize2'>
<li class='itemize'>fixed bug in <span class='ec-lmtt-10'>dvisvgm_hashes</span> extension: didn’t check for table index existence in string concenation</li>
</ul>
</li>
<li class='itemize'><!-- l. 985 -->
<p class='noindent'>2019/03/21</p>
<ul class='itemize2'>
<li class='itemize'>version 0.2f released</li>
</ul>
</li>
<li class='itemize'><!-- l. 993 -->
<p class='noindent'>2019/03/15</p>
<ul class='itemize2'>
<li class='itemize'>check for the image dimensions existence in the <span class='ec-lmtt-10'>odtimagesize</span> domfilter.</li>
</ul>
</li>
<li class='itemize'><!-- l. 1002 -->
<p class='noindent'>2019/03/13</p>
<ul class='itemize2'>
<li class='itemize'>don’t use <span class='ec-lmtt-10'>odtimagesize</span> domfilter in the <span class='ec-lmtt-10'>ODT</span> format, the issue it fixes had been resolved in <span class='ec-lmtt-10'>tex4ht</span>.</li>
</ul>
</li>
<li class='itemize'><!-- l. 1011 -->
<p class='noindent'>2019/03/08</p>
<ul class='itemize2'>
<li class='itemize'>use <span class='ec-lmtt-10'>%USERPROFILE</span> for home dir search on Windows.</li>
</ul>
</li>
<li class='itemize'><!-- l. 1019 -->
<p class='noindent'>2019/01/28</p>
<ul class='itemize2'>
<li class='itemize'>added <span class='ec-lmtt-10'>joincolors</span> domfilter and <span class='ec-lmtt-10'>join_colors</span> extension. It can join CSS rules created for the LaTeX colors and update the HTML file.</li>
</ul>
</li>
<li class='itemize'><!-- l. 1029 -->
<p class='noindent'>2019/01/22</p>
<ul class='itemize2'>
<li class='itemize'>version 0.2e released</li>
<li class='itemize'>updated the <span class='ec-lmtt-10'>odttemplate</span> filter. It will use styles from the generated ODT file that haven’t been present in the template file.</li>
</ul>
</li>
<li class='itemize'><!-- l. 1040 -->
<p class='noindent'>2019/01/10</p>
<ul class='itemize2'>
<li class='itemize'>version 0.2d released</li>
</ul>
</li>
<li class='itemize'><!-- l. 1048 -->
<p class='noindent'>2019/01/05</p>
<ul class='itemize2'>
<li class='itemize'>added <span class='ec-lmtt-10'>docbook</span> and <span class='ec-lmtt-10'>tei</span> output formats.</li>
</ul>
</li>
<li class='itemize'><!-- l. 1056 -->
<p class='noindent'>2018/12/19</p>
<ul class='itemize2'>
<li class='itemize'>new library: <span class='ec-lmtt-10'>make4ht-xtpipes.lua</span>. It contains code for xtpipes handling.</li>
<li class='itemize'>moved Xtpipes handling code from <span class='ec-lmtt-10'>formats/odt.lua</span>.</li>
</ul>
</li>
<li class='itemize'><!-- l. 1067 -->
<p class='noindent'>2018/12/18</p>
<ul class='itemize2'>
<li class='itemize'>new filter: <span class='ec-lmtt-10'>odttemplate</span>. It can be used for replacing style in a generated <span class='ec-lmtt-10'>ODT</span> file by a style from another existing <span class='ec-lmtt-10'>ODT</span> file.</li>
<li class='itemize'>new extension: <span class='ec-lmtt-10'>odttemplate</span>. Companioning extension for filter with the same name.</li>
<li class='itemize'>fixed bug in <span class='ec-lmtt-10'>make4ht-filters.lua</span>: the parameters table haven’t been passed to filters.</li>
</ul>
</li>
<li class='itemize'><!-- l. 1083 -->
<p class='noindent'>2018/12/17</p>
<ul class='itemize2'>
<li class='itemize'>fixed extension handling. The disabling from the command line didn’t take precedence over extensions enabled in the config file. Extensions also could be executed multiple times.</li>
</ul>
</li>
<li class='itemize'><!-- l. 1093 -->
<p class='noindent'>2018/11/08</p>
<ul class='itemize2'>
<li class='itemize'>removed replacing newlines by blank strings in the <span class='ec-lmtt-10'>joincharacters</span> domfilter. The issue it fixed doesn’t seem to exist anymore, and it ate spaces sometimes.</li>
</ul>
</li>
<li class='itemize'><!-- l. 1103 -->
<p class='noindent'>2018/11/01</p>
<ul class='itemize2'>
<li class='itemize'>added <span class='ec-lmtt-10'>t4htlinks</span> domfilter</li>
<li class='itemize'>fixed the <span class='ec-lmtt-10'>xtpipes</span> and <span class='ec-lmtt-10'>filters</span> execution order in the <span class='ec-lmtt-10'>ODT</span> format</li>
</ul>
</li>
<li class='itemize'><!-- l. 1114 -->
<p class='noindent'>2018/10/26</p>
<ul class='itemize2'>
<li class='itemize'>fixed ODT generation for files that contains special characters for Lua string patterns</li>
<li class='itemize'>replace non-breaking spaces with entities. It caused issues in LO</li>
</ul>
</li>
<li class='itemize'><!-- l. 1125 -->
<p class='noindent'>2018/10/18</p>
<ul class='itemize2'>
<li class='itemize'>fixed the executable installation</li>
</ul>
</li>
<li class='itemize'><!-- l. 1133 -->
<p class='noindent'>2018/09/16</p>
<ul class='itemize2'>
<li class='itemize'>added the <span class='ec-lmtt-10'>scale</span> option for <span class='ec-lmtt-10'>dvisvgm_hashes</span> extension</li>
</ul>
</li>
<li class='itemize'><!-- l. 1142 -->
<p class='noindent'>2018/09/14</p>
<ul class='itemize2'>
<li class='itemize'>require the <span class='ec-lmtt-10'>-dvi</span> option with <span class='ec-lmtt-10'>latexmk_build</span> extension</li>
</ul>
</li>
<li class='itemize'><!-- l. 1151 -->
<p class='noindent'>2018/09/12</p>
<ul class='itemize2'>
<li class='itemize'>added <span class='ec-lmtt-10'>xindy</span> command for the build file</li>
</ul>
</li>
<li class='itemize'><!-- l. 1159 -->
<p class='noindent'>2018/09/03</p>
<ul class='itemize2'>
<li class='itemize'>expanded the <span class='ec-lmtt-10'>--help</span> option</li>
</ul>
</li>
<li class='itemize'><!-- l. 1167 -->
<p class='noindent'>2018/08/27</p>
<ul class='itemize2'>
<li class='itemize'>added <span class='ec-lmtt-10'>odtimagesize</span> domfilter</li>
<li class='itemize'>load <span class='ec-lmtt-10'>odtimagesize</span> by default in the ODT format</li>
</ul>
</li>
<li class='itemize'><!-- l. 1177 -->
<p class='noindent'>2018/08/23</p>
<ul class='itemize2'>
<li class='itemize'>released version 0.2c</li>
</ul>
</li>
<li class='itemize'><!-- l. 1185 -->
<p class='noindent'>2018/08/21</p>
<ul class='itemize2'>
<li class='itemize'>added processor core detection on Windows</li>
<li class='itemize'>make processor number configurable</li>
<li class='itemize'>updated the documentation.</li>
</ul>
</li>
<li class='itemize'><!-- l. 1197 -->
<p class='noindent'>2018/08/20</p>
<ul class='itemize2'>
<li class='itemize'>added <span class='ec-lmtt-10'>dvisvgm_hashes</span> extension</li>
</ul>
</li>
<li class='itemize'><!-- l. 1205 -->
<p class='noindent'>2018/07/03</p>
<ul class='itemize2'>
<li class='itemize'>create the <span class='ec-lmtt-10'>mimetype</span> file to achieve the ODT file validity</li>
</ul>
</li>
<li class='itemize'><!-- l. 1213 -->
<p class='noindent'>2018/07/02</p>
<ul class='itemize2'>
<li class='itemize'>disabled conversion of XML entities for &amp;, &lt; and &gt; characters back to Unicode, because it breaks XML validity</li>
</ul>
</li>
<li class='itemize'><!-- l. 1223 -->
<p class='noindent'>2018/06/27</p>
<ul class='itemize2'>
<li class='itemize'>fixed root dir detection</li>
</ul>
</li>
<li class='itemize'><!-- l. 1231 -->
<p class='noindent'>2018/06/26</p>
<ul class='itemize2'>
<li class='itemize'>added code for detection of TeX distribution root for Miktex and TL</li>
</ul>
</li>
<li class='itemize'><!-- l. 1239 -->
<p class='noindent'>2018/06/25</p>
<ul class='itemize2'>
<li class='itemize'>moved call to <span class='ec-lmtt-10'>xtpipes</span> from <span class='ec-lmtt-10'>t4ht</span> to the <span class='ec-lmtt-10'>ODT</span> format drives. This should fix issues with path expansion in <span class='ec-lmtt-10'>tex4ht.env</span> in TeX distributions.</li>
</ul>
</li>
<li class='itemize'><!-- l. 1249 -->
<p class='noindent'>2018/06/22</p>
<ul class='itemize2'>
<li class='itemize'>added <span class='ec-lmtt-10'>mkutils.find_zip</span> function. It detects <span class='ec-lmtt-10'>zip</span> or <span class='ec-lmtt-10'>miktex-zip</span> executables</li>
</ul>
</li>
<li class='itemize'><!-- l. 1258 -->
<p class='noindent'>2018/06/19</p>
<ul class='itemize2'>
<li class='itemize'>added new filter: <span class='ec-lmtt-10'>entities-to-unicode</span>. It converts XML entites for Unicode characters back to Unicode.</li>
<li class='itemize'>execute <span class='ec-lmtt-10'>entities-to-unicode</span> filter on text and math files in the ODT output.</li>
</ul>
</li>
<li class='itemize'><!-- l. 1270 -->
<p class='noindent'>2018/06/12</p>
<ul class='itemize2'>
<li class='itemize'>added support for direct <span class='ec-lmtt-10'>ODT</span> file packing</li>
</ul>
</li>
<li class='itemize'><!-- l. 1278 -->
<p class='noindent'>2018/06/11</p>
<ul class='itemize2'>
<li class='itemize'>new function available for formats, <span class='ec-lmtt-10'>format.modify_build</span></li>
<li class='itemize'>function <span class='ec-lmtt-10'>mkutils.delete_dir</span> for directory removal</li>
<li class='itemize'>function <span class='ec-lmtt-10'>mkutils.mv</span> for file moving</li>
<li class='itemize'>started on packing of the <span class='ec-lmtt-10'>ODT</span> files directly by the format, instead of <span class='ec-lmtt-10'>t4ht</span></li>
</ul>
</li>
<li class='itemize'><!-- l. 1293 -->
<p class='noindent'>2018/06/08</p>
<ul class='itemize2'>
<li class='itemize'>added support for filenames containing spaces</li>
<li class='itemize'>added support for filenames containing non-ascii characters</li>
<li class='itemize'>don’t require sudo for the installation, let the user to install symbolic links to <span class='ec-lmtt-10'>$PATH</span></li>
</ul>
</li>
<li class='itemize'><!-- l. 1306 -->
<p class='noindent'>2018/05/03</p>
<ul class='itemize2'>
<li class='itemize'>released version <span class='ec-lmtt-10'>0.2b</span></li>
<li class='itemize'>bug fix: use only <span class='ec-lmtt-10'>load</span> function in <span class='ec-lmtt-10'>Make:run</span>, in order to support a local environment.</li>
</ul>
</li>
<li class='itemize'><!-- l. 1317 -->
<p class='noindent'>2018/05/03</p>
<ul class='itemize2'>
<li class='itemize'>released version <span class='ec-lmtt-10'>0.2a</span></li>
<li class='itemize'>renamed <span class='ec-lmtt-10'>latexmk</span> extension to <span class='ec-lmtt-10'>latexmk_build</span>, due to clash in TL</li>
</ul>
</li>
<li class='itemize'><!-- l. 1328 -->
<p class='noindent'>2018/04/18</p>
<ul class='itemize2'>
<li class='itemize'><!-- l. 1333 -->
<p class='noindent'><span class='ec-lmtt-10'>staticsite</span> extension:</p>
<ul class='itemize3'>
<li class='itemize'>make YAML header configurable</li>
<li class='itemize'>set the <span class='ec-lmtt-10'>time</span> and <span class='ec-lmtt-10'>updated</span> headers</li>
</ul>
</li>
<li class='itemize'>don’t override existing tables in <span class='ec-lmtt-10'>filter_settings</span></li>
</ul>
</li>
<li class='itemize'><!-- l. 1346 -->
<p class='noindent'>2018/04/17</p>
<ul class='itemize2'>
<li class='itemize'>done first version of <span class='ec-lmtt-10'>staticsite</span> extension</li>
</ul>
</li>
<li class='itemize'><!-- l. 1354 -->
<p class='noindent'>2018/04/16</p>
<ul class='itemize2'>
<li class='itemize'>check for Git repo in the Makefile, don’t run Git commands outside of repo</li>
</ul>
</li>
<li class='itemize'><!-- l. 1363 -->
<p class='noindent'>2018/04/15</p>
<ul class='itemize2'>
<li class='itemize'>added <span class='ec-lmtt-10'>staticsite</span> filter</li>
<li class='itemize'>working on <span class='ec-lmtt-10'>staticsite</span> extension</li>
</ul>
</li>
<li class='itemize'><!-- l. 1373 -->
<p class='noindent'>2018/04/13</p>
<ul class='itemize2'>
<li class='itemize'>use <span class='ec-lmtt-10'>ipairs</span> instead of <span class='ec-lmtt-10'>pairs</span> to traverse lists of images and image match functions</li>
<li class='itemize'>load extensions in the correct order</li>
</ul>
</li>
<li class='itemize'><!-- l. 1384 -->
<p class='noindent'>2018/04/09</p>
<ul class='itemize2'>
<li class='itemize'>released version <span class='ec-lmtt-10'>0.2</span></li>
<li class='itemize'>disabled default loading of <span class='ec-lmtt-10'>common_domfilters</span> extension</li>
</ul>
</li>
<li class='itemize'><!-- l. 1394 -->
<p class='noindent'>2018/04/06</p>
<ul class='itemize2'>
<li class='itemize'>added <span class='ec-lmtt-10'>Make:enable_extension</span> and <span class='ec-lmtt-10'>Make:disable_extension</span> functions</li>
<li class='itemize'>documented the configuration file</li>
</ul>
</li>
<li class='itemize'><!-- l. 1405 -->
<p class='noindent'>2018/03/09</p>
<ul class='itemize2'>
<li class='itemize'>load the configuration file before extensions</li>
</ul>
</li>
<li class='itemize'><!-- l. 1413 -->
<p class='noindent'>2018/03/02</p>
<ul class='itemize2'>
<li class='itemize'>Aeneas execution works</li>
<li class='itemize'>Aeneas documentation</li>
<li class='itemize'>added support for <span class='ec-lmtt-10'>.make4ht</span> configuration file</li>
</ul>
</li>
<li class='itemize'><!-- l. 1425 -->
<p class='noindent'>2018/02/28</p>
<ul class='itemize2'>
<li class='itemize'>Aeneas configuration file creation works</li>
</ul>
</li>
<li class='itemize'><!-- l. 1433 -->
<p class='noindent'>2018/02/22</p>
<ul class='itemize2'>
<li class='itemize'>fixed bug in <span class='ec-lmtt-10'>fixinlines</span> DOM filter</li>
</ul>
</li>
<li class='itemize'><!-- l. 1441 -->
<p class='noindent'>2018/02/21</p>
<ul class='itemize2'>
<li class='itemize'>added Aeneas domfilter</li>
<li class='itemize'>fixed bugs in <span class='ec-lmtt-10'>joincharacters</span> DOM filter</li>
</ul>
</li>
<li class='itemize'><!-- l. 1451 -->
<p class='noindent'>2018/02/20</p>
<ul class='itemize2'>
<li class='itemize'>fixed bug in <span class='ec-lmtt-10'>joincharacters</span> DOM filter</li>
<li class='itemize'>make <span class='ec-lmtt-10'>woff</span> default font format for <span class='ec-lmtt-10'>mathjaxnode</span></li>
<li class='itemize'>added documentation for <span class='ec-lmtt-10'>mathjaxnode</span> settings</li>
</ul>
</li>
<li class='itemize'><!-- l. 1463 -->
<p class='noindent'>2018/02/19</p>
<ul class='itemize2'>
<li class='itemize'>fixed bug in filter loading</li>
<li class='itemize'>added <span class='ec-lmtt-10'>mathjaxnode</span> extension</li>
</ul>
</li>
<li class='itemize'><!-- l. 1473 -->
<p class='noindent'>2018/02/15</p>
<ul class='itemize2'>
<li class='itemize'>use HTML5 as a default format</li>
<li class='itemize'>use <span class='ec-lmtt-10'>common_domfilters</span> implicitly for the XHTML and HTML5 formats</li>
</ul>
</li>
<li class='itemize'><!-- l. 1484 -->
<p class='noindent'>2018/02/12</p>
<ul class='itemize2'>
<li class='itemize'>added <span class='ec-lmtt-10'>common_domfilters</span> extension</li>
<li class='itemize'>documented DOM filters</li>
</ul>
</li>
<li class='itemize'><!-- l. 1494 -->
<p class='noindent'>2018/02/12</p>
<ul class='itemize2'>
<li class='itemize'>handle XML parsing errors in the DOM handler</li>
<li class='itemize'>enable extension loading in Formatters</li>
</ul>
</li>
<li class='itemize'><!-- l. 1504 -->
<p class='noindent'>2018/02/11</p>
<ul class='itemize2'>
<li class='itemize'>fixed Tidy extension output to support LuaXML</li>
<li class='itemize'>fixed white space issues with <span class='ec-lmtt-10'>joincharacters</span> DOM filter</li>
</ul>
</li>
<li class='itemize'><!-- l. 1514 -->
<p class='noindent'>2018/02/09</p>
<ul class='itemize2'>
<li class='itemize'>fixed issues with the Mathjax filter</li>
<li class='itemize'>documented basic info about thd DOM filters</li>
<li class='itemize'>DOM filter optimalizations</li>
</ul>
</li>
<li class='itemize'><!-- l. 1526 -->
<p class='noindent'>2018/02/08</p>
<ul class='itemize2'>
<li class='itemize'>make Tidy extension configurable</li>
<li class='itemize'>documented filter settings</li>
</ul>
</li>
<li class='itemize'><!-- l. 1536 -->
<p class='noindent'>2018/02/07</p>
<ul class='itemize2'>
<li class='itemize'>added filter for Mathjax-node</li>
</ul>
</li>
<li class='itemize'><!-- l. 1544 -->
<p class='noindent'>2018/02/06</p>
<ul class='itemize2'>
<li class='itemize'>created DOM filter function</li>
<li class='itemize'>added DOM filter for spurious inlinine elements</li>
</ul>
</li>
<li class='itemize'><!-- l. 1554 -->
<p class='noindent'>2018/02/03</p>
<ul class='itemize2'>
<li class='itemize'>added settings handling functions</li>
<li class='itemize'>settings made available for extensions and filters</li>
</ul>
</li>
<li class='itemize'><!-- l. 1564 -->
<p class='noindent'>2017/12/08</p>
<ul class='itemize2'>
<li class='itemize'>fixed the <span class='ec-lmtt-10'>mk4</span> build file loading when it is placed in the current working dir and another one with same filename somewhere in the TEXMF tree.</li>
</ul>
</li>
<li class='itemize'><!-- l. 1574 -->
<p class='noindent'>2017/11/10</p>
<ul class='itemize2'>
<li class='itemize'>Added new filter: <span class='ec-lmtt-10'>svg-height</span>. It tries to fix height of some of the images produced by <span class='ec-lmtt-10'>dvisvgm</span></li>
</ul>
</li>
<li class='itemize'><!-- l. 1583 -->
<p class='noindent'>2017/10/06</p>
<ul class='itemize2'>
<li class='itemize'>Added support for output format selection. Supported formats are <span class='ec-lmtt-10'>xhtml</span>, <span class='ec-lmtt-10'>html5</span> and <span class='ec-lmtt-10'>odt</span></li>
<li class='itemize'>Added support for extensions</li>
</ul>
</li>
<li class='itemize'><!-- l. 1594 -->
<p class='noindent'>2017/09/10</p>
<ul class='itemize2'>
<li class='itemize'>Added support for Latexmk</li>
<li class='itemize'>Added support of <span class='ec-lmtt-10'>math</span> library and <span class='ec-lmtt-10'>tonumber</span> function in the build files</li>
</ul>
</li>
<li class='itemize'><!-- l. 1605 -->
<p class='noindent'>2017/09/04</p>
<ul class='itemize2'>
<li class='itemize'>fixed bug caused by the previous change – the –help and –version didn’t work</li>
</ul>
</li>
<li class='itemize'><!-- l. 1614 -->
<p class='noindent'>2017/08/22</p>
<ul class='itemize2'>
<li class='itemize'>fixed the command line option parsing for <span class='ec-lmtt-10'>tex4ht</span>, <span class='ec-lmtt-10'>t4ht</span> and <span class='ec-lmtt-10'>latex</span> commands</li>
<li class='itemize'>various grammar and factual fixes in the documentation</li>
</ul>
</li>
<li class='itemize'><!-- l. 1625 -->
<p class='noindent'>2017/04/26</p>
<ul class='itemize2'>
<li class='itemize'>Released version <span class='ec-lmtt-10'>v0.1c</span></li>
</ul>
</li>
<li class='itemize'><!-- l. 1633 -->
<p class='noindent'>2017/03/16</p>
<ul class='itemize2'>
<li class='itemize'>check for <span class='ec-lmtt-10'>TeX&nbsp;capacity&nbsp;exceeded</span> error in the LaTeX&nbsp;run.</li>
</ul>
</li>
<li class='itemize'><!-- l. 1641 -->
<p class='noindent'>2016/12/19</p>
<ul class='itemize2'>
<li class='itemize'>use full input name in <span class='ec-lmtt-10'>tex_file</span> variable. This should enable use of files without <span class='ec-lmtt-10'>.tex</span> extension.</li>
</ul>
</li>
<li class='itemize'><!-- l. 1650 -->
<p class='noindent'>2016/10/22</p>
<ul class='itemize2'>
<li class='itemize'>new command available in the build file: <span class='ec-lmtt-10'>Make:add_file(filename)</span>. This enables filters and commands to register files to the output.</li>
<li class='itemize'>use ipairs instead of pairs for traversing files and executing filters. This should ensure correct order of executions.</li>
</ul>
</li>
<li class='itemize'><!-- l. 1663 -->
<p class='noindent'>2016/10/18</p>
<ul class='itemize2'>
<li class='itemize'>new filter: replace colons in <span class='ec-lmtt-10'>id</span> and <span class='ec-lmtt-10'>href</span> attributes with underscores</li>
</ul>
</li>
<li class='itemize'><!-- l. 1672 -->
<p class='noindent'>2016/01/11</p>
<ul class='itemize2'>
<li class='itemize'>fixed bug in loading documents with full path specified</li>
</ul>
</li>
<li class='itemize'><!-- l. 1680 -->
<p class='noindent'>2015/12/06 version 0.1b</p>
<ul class='itemize2'>
<li class='itemize'>modifed lapp library to recognize <span class='ec-lmtt-10'>--version</span> and</li>
<li class='itemize'>added <span class='ec-lmtt-10'>--help</span> and <span class='ec-lmtt-10'>--version</span> command line options</li>
</ul>
</li>
<li class='itemize'><!-- l. 1691 -->
<p class='noindent'>2015/11/30</p>
<ul class='itemize2'>
<li class='itemize'>use <span class='ec-lmtt-10'>kpse</span> library for build file locating</li>
</ul>
</li>
<li class='itemize'><!-- l. 1699 -->
<p class='noindent'>2015/11/17</p>
<ul class='itemize2'>
<li class='itemize'>better <span class='ec-lmtt-10'>-jobname</span> handling</li>
</ul>
</li>
<li class='itemize'><!-- l. 1707 -->
<p class='noindent'>2015/09/23 version 0.1a</p>
<ul class='itemize2'>
<li class='itemize'>various documentation updates</li>
<li class='itemize'><span class='ec-lmtt-10'>mozhtf</span> profile for unicode output is used, this should prevent ligatures in the output files</li>
</ul>
</li>
<li class='itemize'><!-- l. 1718 -->
<p class='noindent'>2015/06/29 version 0.1</p>
<ul class='itemize2'>
<li class='itemize'>major README file update</li>
</ul>
</li>
<li class='itemize'><!-- l. 1726 -->
<p class='noindent'>2015/06/26</p>
<ul class='itemize2'>
<li class='itemize'>added Makefile</li>
<li class='itemize'>moved INSTALL instructions from README to INSTALL</li>
</ul>
</li>
</ul>
</body>
</html>
